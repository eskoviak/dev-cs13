<apex:page id="AccountSummary" showHeader="false" sidebar="false" applyBodyTag="false" applyHtmlTag="false" standardStylesheets="false" 
docType="html-5.0" controller="RWS_AccountSetupController">
    <html lang="en">

    <head>
        <c:HeadTagComponent />
        <link href="{!URLFOR($Resource.RWSC_Assets, 'include/css/popup.css')}" rel="stylesheet" />
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/back_next.js')}"></script>
        <apex:includeScript value="{!URLFOR($Resource.RWSC_Assets, 'include/js/jquery.validate.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.RWSC_Assets, 'include/js/additional-methods.min.js')}" />
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/validation.js')}"></script>
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/modal.js')}"></script>
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/attachments.js')}"></script>
        <apex:includeScript value="{!URLFOR($Resource.RWSC_Assets, 'include/js/logout.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.RWS_Datatable, '/RWS_Datatable/jquerydataTables.js')}"/>
        <script type="text/javascript">
        var acc = document.getElementsByClassName("accordion");
        var sendingCreditApp = false;
        
        $(document).ready(function() { console.log('document ready');          
            //sets pagination for related lists
            $('#AttachmentListView').DataTable( {
                PageLength: 10,
                 bFilter: false,
                 order: [ 6, "desc" ]
            } );    
            
            $('#ProgramListView').DataTable( {
                PageLength: 10,
                 bFilter: false,
                 order: [ 2, "desc" ]
            } );    
            
            
                       
            //Sets up accordion on page            
            
            //var acc = document.getElementsByClassName("accordion");
            var i;
            
            for (i = 0; i < acc.length; i++) {
                acc[i].onclick = function(){
                     
                     
                    
                    var panel = this.nextElementSibling;                
                    
                                                            
                    this.classList.toggle("active");
                    
                     
                    //accordion with animation
                    if (panel.style.maxHeight){
                      panel.style.maxHeight = null;
                    } else {
                      panel.style.maxHeight = (panel.scrollHeight * 5) + "px";
                    } 
                    
                   
                    
                }
            }
            
             //expands all accordions by default 
            $(".accordion").trigger("click");
            
            //collapses accordion panels according to user custom setting for each panel                
            if ({!isCollapsedAccInfo} == true) {
                $(".accordion:first").trigger("click");
            }   
            if ({!isCollapsedContact} == true) {
                $(".accordion.contact").trigger("click");
            }
            if ({!isCollapsedBilling} == true) {
                $(".accordion.billing").trigger("click");
            }
            if ({!isCollapsedChildAcc} == true) {
                $(".accordion.child-account").trigger("click");
            }
            if ({!isCollapsedPrograms} == true) {
                $(".accordion.program").trigger("click");
            }
            if ({!isCollapsedAttachments} == true) {
                $(".accordion.attachment").trigger("click");
            }
        
        });
       
        
        function disablePropagation(event) {
           if (event.stopPropagation){
               event.stopPropagation();
           }
           else if(window.event){
              window.event.cancelBubble=true;
           }
        }                 
                                
                                                        
        
        
        </script>
        <style>
            div.accordion:after {
                content: '\02795'; /* (+) */
                font-size: 13px;
                color: #c31e38;
                float: left;
                margin-left: 5px;
                margin-top: 5px;
                
            }
            
            div.accordion.active:after {
                content: "\2796"; /* (-) */
                color: #c31e38;
                margin-left: 5px;
                margin-top: 5px;
            }        
            
            div.panel {
                padding: 0 18px;
                background-color: rgb(237, 232, 221) !important;            
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
            }
            
            .enlargeTextbox {
                zoom: 1.5;                
            } 
            
            .pad_top2 {
                padding-top: 2px;    
            }
            
        </style>
    </head>
    
    <body class="accounts" onload="displayBilling(); showEditDivs();" >
        <div class="fluid-container">
            <c:RWS_HeaderComponent />
            <div class="row site-content">
                <div class="form-horizontal form_bg col-sm-12 pt-0">
                    <!-- ************* Page Header ****************** -->
                    <div class="col-sm-12 summary-header">
                        <div class="col-sm-4">&nbsp;</div>
                        <div class="col-sm-4 mrg_btm0 pad_rgt5">
                            <h2 class="text-uppercase fancy white"><span>Account Summary</span></h2>
                        </div>
                        <apex:outputPanel id="activationButtons">
                            <div class="col-sm-4 pad_rgt5">
                                                                                             
                            
                                <apex:outputpanel rendered="{!(isActive && hasEditAccess && isFullAccessUser)}" id="deactivatePanId">
                                    <span id="btn_Account_DeActivate" onClick="specialModal('fa fa-bell-o', 'DEACTIVATE ACCOUNT?', 'Do you want to deactivate this account?', null, '', 'DeactivateAccountCall()', 'YES', '' , 'NO')" class="btn btn-danger btn-md flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Deactivate Account</span>
                                </apex:outputpanel>
                                <apex:outputpanel rendered="{!(isActive && !hasEditAccess) || (isActive && !isFullAccessUser)}">
                                    <span class="btn btn-danger btn-outline disabled btn-md flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Deactivate Account</span>
                                </apex:outputpanel>
                                <apex:outputpanel rendered="{!(!isActive && hasEditAccess && isFullAccessUser)}" id="activatePanId">
                                    <span id="btn_Account_Activate" onClick="specialModal('fa fa-bell-o', 'ACTIVATE ACCOUNT?', 'Do you want to activate this account?', null, '', 'ActivateAccountCall()', 'YES', '' , 'NO')" class="btn btn-danger btn-md flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Activate Account</span>
                                </apex:outputpanel>
                                <apex:outputpanel rendered="{!(!isActive && !hasEditAccess) || (!isActive && !isFullAccessUser)}">
                                    <span class="btn btn-danger btn-outline btn-md disabled flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Activate Account</span>
                                </apex:outputpanel>
                                
                                <apex:outputpanel rendered="{!(resendCredit && hasEditAccess && isFullAccessUser)}">  
                                    <span id="btn_Resend_Credit" onClick="resendModal('fa fa-bell-o', 'RESEND CREDIT APPLICATION', 'ResendCreditApp()', 'RESEND', '' , 'CANCEL')" class="btn btn-danger btn-outline btn-md flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Resend Credit Application</span>
                                </apex:outputpanel>
                                <apex:outputpanel rendered="{!(!resendCredit || !hasEditAccess || !isFullAccessUser)}">
                                    <span class="btn btn-danger btn-outline disabled btn-md flt_rgt mrg_top20 mrg_btm20 mrg_rgt0">Resend Credit Application</span>
                                </apex:outputpanel>  
                                
                            </div>
                        </apex:outputPanel>
                    </div>
                    <!-- begin container div account info -->
                    <apex:form id="accountStatusForm">
                        <apex:actionStatus onstart="$('#splashscreen').modal({backdrop: 'static', keyboard: false});" onstop="$('#splashscreen').modal('hide');" id="loadSplashScreen"/>
                        <apex:actionFunction name="ActivateAccountCall" action="{!AccountActivate}" oncomplete="AccountStatusReflect();" reRender="Afterinsert, activationButtons, accountInfo"  status="loadSplashScreen" />
                        <apex:actionFunction name="DeactivateAccountCall" action="{!AccountDeactivate}" oncomplete="AccountStatusDeactivated();" reRender="Afterinsert, activationButtons, accountInfo"  status="loadSplashScreen" />
                    </apex:form>
                    <apex:form id="accountForm">
                        <div id="accountDetailsHeader" class="accordion">
                            <!-- ************** Account Info Header ************* -->
                            <div class="row">
                                <div class="summary_section_2 col-xs-12 mini_text_padder pheader">
                                    <div class="col-xs-3">
                                        <span class="text-uppercase sub-header">Account Information</span>
                                    </div>
                                    <div id="accountDetailsHeaderView">
                                    <!-- RWBAA Button -->
                                        <div class="col-xs-1 col-xs-offset-6 txt_right pad_rgt0" id="infoBtn">
                                            <apex:outputpanel rendered="{!(isFullAccessUser && isStoreOwner)}" layout="none">                                        
												<a href="{!URLRwbaaSummary}" data-toggle="modal" data-target="#myModal" data-remote="false"> 
													<span id="rwbaaInfoBtn" class="btn btn-danger btn-outline " aria-hidden="true" >  RWBAA Information  </span>
												</a>  
                                            </apex:outputpanel>												
                                        </div>   
                                        <div class="col-xs-1 col-xs-offset-1 txt_right pad_rgt0">
                                           <!-- Edit Access: {!hasEditAccess} {!isNeedToLock} -->
                                           
                                            <apex:outputpanel id="editAccountAction" rendered="{!hasEditAccess && isFullAccessUser}" >
                                                <a href="#" class="navx" onClick="disablePropagation(event); editAccount(); checkExemption(); return false;">
                                                    <!-- ********************** Edit **************** -->
                                                    <span class="btn btn-danger btn-outline mrg_rgt5" aria-hidden="true">Edit</span>
                                                </a>
                                            </apex:outputpanel>
                                          <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" id="disabledEditAccountAction">
                                                <a href="#" class="navx" onClick="disablePropagation(event);">
                                                    <!-- ********************** Edit **************** -->
                                                    <span class="btn btn-danger btn-outline disabled mrg_rgt5" aria-hidden="true">Edit</span>
                                                </a>
                                            </apex:outputpanel> 
                                        </div>
                                     </div>
                                     <div id="accountDetailsHeaderEdit" class="dis_none">
                                        <apex:actionRegion >
                                        <div class="col-sm-2 col-sm-offset-7 txt_right pad_rgt0">
                                                <apex:outputPanel id="accountSaveAction" >
                                                    <!--<a href="#" class="navx" onclick="saveAccount(); return false;">
                                                    </a>-->
                                                    <!-- ********************** Save **************** -->
                                                    <span class="btn btn-danger" onClick="disablePropagation(event); accountInfoValidSave();" aria-hidden="true">Save</span>
                                                </apex:outputPanel>
                                                <a href="#" class="navx" onClick="disablePropagation(event); AccountHideEdit(); return false;">
                                                    <!-- ********************** Cancel **************** -->
                                                    <span class="btn btn-danger btn-outline" aria-hidden="true">Cancel</span>
                                                </a>
                                        </div>
                                        </apex:actionRegion>
                                        
                                    </div>   
                                </div>
                            </div>
                            </div>
                            <div class="panel">
                            
                            <div id="accountDetails"> 
                            <apex:outputPanel id="accountDetailsPanel">

                            <apex:pagemessages ></apex:pagemessages>
                            
                            <!-- ************** Account Info Section************* -->
                            <div class="panel-body">
                                <div class="row">
                                    <div class="custom_space_20" />
                                    <h4 class="text-uppercase title-text pad_lft15">Company Information</h4>
                                    <div class="hgt15" />
                                </div>
                                <!-- ************** Company Name and Phone ************* -->
                                <apex:outputpanel rendered="{!NOT(ISNULL(parentAccountId))}">
                                    <div id="parentAcctDiv" class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="parentAcct">Parent Account</label>
                                        <div class="col-xs-3 pad_top7">
                                            <!-- <apex:outputText id="parentAcct" value="{!parentAccountName}"/> -->
                                           <apex:outputLink value="AccountSummary?tab=account&id={!parentAccountId}" rendered="{!hasParentAccountAccess}">{!parentAccount.Name}</apex:outputLink>

                                           <apex:outputText value="{!parentAccount.Name}" rendered="{!!hasParentAccountAccess}" />
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aname">Company Name</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aname" value="{!accountName}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aphone">Company Phone #</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aphone" value="{!accountPhone}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="companyType">Company Type</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="companyType" value="{!selectAccountType}" />
                                        <!--<apex:outputText id="companyType" value="{!accountType}" /> -->
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aowner">Account Owner</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aowner" value="{!accountOwner}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="anumber">Account Number</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="anumber" value="{!accountNumber}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="owningStore">Owning Store</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="owningStore" value="{!owningStore}" />
                                    </div>
                                </div>
                                <apex:outputPanel id="accountInfo">
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="Astatus">Account Status</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="Astatus" value="{!AccountStatus}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="nam">NAM</label>
                                        <div class="col-xs-3 pad_top7">
                                        <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                            <apex:outputField id="nam" value="{!editAccount.NAM__c}" />
                                        </apex:outputPanel>    
                                        </div>
                                        
                                    </div>
                                </apex:outputPanel>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="atype">Account Type</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="atype" value="{!selectAccountCategory}" />
                                        <!--<apex:outputText id="atype" value="{!accountCategory}" /> -->
                                    </div>
                                    
                                    <label class="form control-label col-xs-2 pad_rgt0" for="ism">ISM</label>
                                    <div class="col-xs-3 pad_top7" id="ismDiv">
                                        <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                            <apex:outputField id="ism" value="{!editAccount.ISM__c}" styleClass="ISM" />
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="rwbaaId">RWBAA Customer ID</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="rwbaaId" value="{!editAccount.MSTS_ID__c}" />
                                    </div>
                                     
                                    <label class="form control-label col-xs-2 pad_rgt0" for="bas">BAS</label>
                                    <div class="col-xs-3 pad_top7">
                                    <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                        <apex:outputField id="bas" value="{!editAccount.IAS__c}" />
                                    </apex:outputPanel>    
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="recourse">Recourse Customer</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="recourse" value="{!editAccount.Recourse_Customer__c}" />
                                    </div>                                  
                                   
                                </div>
                                
                                <!-- ****** Company Address (begin) ****** -->
                                <div class="row hr_row_style col-xs-12">
                                    <hr class="hr_style"></hr>
                                </div>
                                <div class="row">
                                    <div class="custom_space_20" />
                                    <h4 class="text-uppercase title-text pad_lft15">Company Address</h4>
                                    <div class="hgt15" />
                                </div>                                
                                
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aline1">Address Line 1</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aline1" value="{!accountLine1}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aline2">Address Line 2</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aline2" value="{!accountLine2}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aline3">Address Line 3</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aline3" value="{!accountLine3}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="acity">City</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="acity" value="{!accountCity}" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="astate">State / Province</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="astate" value="{!IF(accountState == '--Select--'," ", accountStateLabel)}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="azip">Zip / Postal Code</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="azip" value="{!accountZipCode}" />
                                    </div>                                   
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="country">Country</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="acCountry" value="{!accountCountryLabel}" />
                                    </div>
                                </div>
                                <!-- ***** Company Address (end) ***** --> 
                                

                                <!-- ************** Tax Information ************* -->
                                <div class="row hr_row_style col-xs-12">
                                    <hr class="hr_style"></hr>
                                </div>
                                <div class="row">
                                    <div class="custom_space_20" />
                                    <h4 class="text-uppercase title-text pad_lft15">Tax Information</h4>
                                    <div class="hgt15" />
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aexempt">Tax Exempt</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aexempt" value="{!SelectTaxExempt}" />
                                    </div>
                                    <div class="exemptFields">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="acertificate">Certificate Number</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="acertificate" value="{!TaxCertificateNumber}" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group exemptFields">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="aexpiration">Expiration Date</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="aexpiration" value="{!displayTaxExpiryDate}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="areason">Exemption Reason</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="areason" value="{!exemptionreasonName}" />
                                    </div>
                                </div>

                            </div>
                            </apex:outputPanel>
                        </div>
                        
                        <!-- end container div account info -->
                        <apex:actionfunction name="searchAF" action="{!getStateTaxExempt}" rerender="pgb" />
                        <apex:actionfunction name="saveAccount" action="{!saveeditAccount}" oncomplete="AccountHideEdit();" reRender="activationButtons, accountDetailsPanel, contactPhysicalAddress" />
                        <!-- begin container div account info edit -->
                        <div id="accountEdit" style="display:none">
                            
                            <!-- ************** Account Info Section Header************* -->
                            <apex:outputPanel id="accountEditId">
                                <apex:pagemessages id="showAccountError"></apex:pagemessages> 
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Company Information</h4>
                                        <div class="hgt15" />
                                    </div>
                                    <apex:outputpanel rendered="{!NOT(ISNULL(parentAccountId))}">
                                        <div id="parentAcctDiv2" class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="parentAcct2">Parent Account</label>
                                            <div class="col-xs-3 pad_top7">
                                                <!-- <apex:outputText id="parentAcct" value="{!parentAccountName}"/> -->
                                                <apex:commandLink action="AccountSummary?tab=account&id={!parentAccountId}" value="{!parentAccount.Name}" rendered="{!hasParentAccountAccess}"/>
                                                
                                                <apex:outputText value="{!parentAccount.Name}" rendered="{!!hasParentAccountAccess}" />
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <!-- ************** Company Name and Phone ************* -->
                                    <div class="companyInfo">
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="name">Company Name</label>
                                        <div class="col-xs-3">
                                            <div>
                                                <apex:inputText id="name" styleClass="form-control" value="{!accountName}" rendered="{!hasEditAccess}" />
                                            </div>
                                            <div class="pad_top7">
                                                <apex:outputText styleClass="form-text" value="{!accountName}" rendered="{!!hasEditAccess}" />
                                            </div>
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="phone">Company Phone #</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="phone" styleClass="mask-phone form-control bfh-phone inputReset" value="{!accountPhoneEdit}" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" >Company Type</label>
                                        <apex:outputPanel rendered="{!isNeedToLock}">
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="companyTypeEditLock" value="{!selectAccountType}" />
                                            </div>                                        
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!!isNeedToLock}">
                                            <div class="col-xs-3">
                                                <apex:selectList id="companyTypeEdit" value="{!selectAccountType}" styleClass="form-control" multiselect="false" size="1" onblur="searchAF();">
                                                    <apex:selectoptions value="{!AccountType}" />
                                                </apex:selectList>
                                            </div>
                                        </apex:outputPanel>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="phoneExt">Extension</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="phoneExt" styleClass="form-control bfh-phone inputReset" value="{!accountPhoneExt}" maxlength="4" onkeypress="return NumbersOnly(event);"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="anumberEdit">Account Number</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="anumberEdit" value="{!accountNumber}" />
                                        </div>
                                         <label class="form control-label col-xs-2 pad_rgt0" for="aownerEdit">Account Owner</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="aownerEdit" value="{!accountOwner}" />
                                        </div>
                                       
                                        
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="Astatus2">Account Status</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="Astatus2" value="{!AccountStatus}" />
                                        </div>
                                         <label class="form control-label col-xs-2 pad_rgt0" for="owningStoreEdit">Owning Store</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="owningStoreEdit" value="{!owningStore}" />
                                        </div>
                                        
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="atypeEdit">Account Type</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="atypeEdit" value="{!selectAccountCategory}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="namEdit">NAM</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                                <apex:outputField id="namEdit" value="{!editAccount.NAM__c}" styleClass="NAM"/>
                                            </apex:outputPanel>
                                        </div>
                                        
                                        
                                    </div>
                                     <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="rwbaaEdit">RWBAA Customer Id</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="rwbaaEdit" value="{!editAccount.MSTS_ID__c}" />
                                        </div>
                                         <label class="form control-label col-xs-2 pad_rgt0" for="ismEdit">ISM</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                                <apex:outputField id="ismEdit" value="{!editAccount.ISM__c}" styleClass="ISM"/>
                                            </apex:outputPanel>
                                        </div>
                                        
                                        
                                    </div>
                                     <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="recourseEdit">Recourse Customer</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="recourseEdit" value="{!editAccount.Recourse_Customer__c}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="basEdit">BAS</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputPanel styleClass="txt_dec_none rw-dark-grey disable-lookup">
                                                <apex:outputField id="basEdit" value="{!editAccount.IAS__c}" styleClass="ISM"/>
                                            </apex:outputPanel>
                                        </div> 
                                                                                
                                    </div>
                                    
                                    <!-- ****** Company Address (begin) ****** -->
                                    <div class="row hr_row_style col-xs-12">
                                        <hr class="hr_style"></hr>
                                    </div>
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Company Address</h4>
                                        <div class="hgt15" />
                                    </div> 
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="line1">Address Line 1</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="line1" styleClass="form-control"  value="{!accountLine1}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="line2">Address Line 2</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="line2" styleClass="form-control"  value="{!accountLine2}" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="line3">Address Line 3</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="line3" styleClass="form-control"  value="{!accountLine3}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="city">City</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="city" styleClass="form-control" value="{!accountCity}" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <span>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="state">State / Province</label>
                                        <div class="col-xs-3">
                                            <apex:selectList id="account_edit_state" value="{!accountState}" styleClass="state company form-control" onchange="updateCountry('companyInfo');" multiselect="false" size="1" onblur="searchAF();">
                                                <apex:selectoptions value="{!StateOptions}" />
                                            </apex:selectList>
                                        </div>
                                        </span>
                                       
                                        <label class="form control-label col-xs-2 pad_rgt0" for="zip">Zip / Postal Code</label>
                                        <div class="col-xs-3">
                                            <apex:inputText id="zip" styleClass="form-control" value="{!accountZipCode}" />
                                        </div>
                                        
                                    </div>
                                    <div class="form-group">
                                        <span>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="country">Country</label>
                                        <div class="col-xs-3">
                                            <apex:selectList id="country" value="{!accountCountry}" styleClass="form-control country inputReset" onchange="updateState('companyInfo', 'company')" multiselect="false" size="1" onblur="">
                                                <apex:selectoptions value="{!CountryOptions}" />
                                            </apex:selectList>
                                        </div>
                                        </span>
                                    </div>
                                    </div>
                                                                        
                                    
                                    
                                    <!-- ****** Company Address (end) ****** -->
                                    
                                    <div class="row summary_section_3">
                                        <br/>
                                        <br/>
                                    </div>
                                    
                                    <!-- ************** Tax Info Section Header************* -->
                                    <div class="row hr_row_style col-xs-12">
                                        <hr class="hr_style"></hr>
                                    </div>
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Tax Information</h4>
                                        <div class="hgt15" />
                                    </div>
                                    <!-- ************** Tax Info Section ************* -->
                                    <div class="form-group">
                                        <label class="form control-label col-xs-4 col-lg-2 pad_rgt0" for="exempt">Tax Exempt</label>
                                        <div class="col-xs-5 col-lg-3 radio pad_top0">
                                            <apex:selectRadio id="SelectTaxExemptid" value="{!SelectTaxExempt}" styleClass="radio_btn5" onchange="HideOrShowTaxExempt(this)">
                                                <apex:selectoptions value="{!TaxExempt}" />
                                            </apex:selectRadio>
                                        </div>
                                        <div id="CertificationSection1">
                                            <div class="exemptFields">
                                                <label class="form control-label col-xs-4 col-lg-2 pad_rgt0" for="certificate">Certificate #</label>
                                                <div class="col-xs-5">
                                                    <div class="col-xs-5 col-lg-3 pad_lft0">
                                                        <apex:inputText id="certificate" styleClass="form-control" value="{!TaxCertificateNumber}" />
                                                    </div>
                                                   
                                                    <div class="col-xs-6 col-lg-6 pad_lft0"> 
                                                    Please upload tax certificate <br/>
                                                    in the attachments section 
                                                    <!--                                                   
                                                         <label for="attachmentFile" class="attachLabel">
                                                            <i class="fa fa-fw pad_lft10 pad_top5 gears_icon" aria-hidden="true" title="Upload Certificate">ï‚“</i>
                                                            <span id="attachLabel" class="rw-dark-red pad_lft5"> 
                                                              <apex:outputText rendered="{!ISBLANK(AttachCertificate.id)}">Upload Certificate</apex:outputText> 
                                                              
                                                          </span>
                                                        </label>
                                                        <input type="file" id="attachmentFile" /> 
                                                        -->                                                       
                                                    </div>
                                                   
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="CertificationSection2">
                                        <div class="form-group exemptFields">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="expiration">Expiration Date</label>
                                            <div class="col-xs-3">
                                                <apex:input type="text" html-placeholder="mm/dd/yyyy" styleClass="form-control datepicker" id="expiration" value="{!TaxExpiryDate}" html-maxlength="10"/>
                                            </div>
                                            <apex:outputPanel id="pgb">
                                                <label class="form control-label col-xs-2 pad_rgt0" for="reason">Exemption Reason</label>
                                                <div class="col-xs-3">
                                                    <apex:selectList id="exReason" value="{!selecttaxName}" styleClass="form-control" multiselect="false" size="1">
                                                        <apex:selectoptions value="{!exemptionreasonOption}" />
                                                        <apex:actionSupport event="onchange" action="{!AssignTaxExempt}" reRender="ExemptionOptions" />
                                                    </apex:selectList>
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        
                                    </div>
                                </div>
                                <script>
                                $(document).ready(function() {

                                    $(".mask-phone").mask("(999) 999-9999");
                                    $('input.datepicker').datepicker();
                                    if ('{!TaxExpiryDate}' !== "") {
                                        $('input.datepicker').datepicker("setDate", "{!displayTaxExpiryDate}");
                                    }
                                });
                                                              
                                </script>
                            </apex:outputPanel>                        
                         <div class="row summary_section_3">
                            <br/>
                            <br/>
                        </div>
                        </div>
                        </div> <!-- panel -->
                    </apex:form>
                    
                    <!-- end container div account info edit -->
                   
                    
                    <apex:outputPanel rendered="{!isFullAccessUser}">
                    <!-- begin container div contact info -->
                    <apex:form id="contactForm">
                        <div id="contactDetailsHeader" class="accordion contact">
                        
                            <!-- ************** Contact Info Header ************* -->
                            <div class="row">
                                <div class="summary_section_2 col-xs-12 mini_text_padder pheader">
                                    <div class="col-xs-3">
                                        <span class="text-uppercase sub-header">Contact Information</span>
                                    </div>
                                    <div id="contactDetailsHeaderView">
                              <!-- RWBAA Button -->
                                        <div class="col-xs-1 col-xs-offset-6 txt_right pad_rgt0">
                                            <apex:outputpanel rendered="{!(isFullAccessUser && isStoreOwner)}" layout="none">                                        
												<a href="{!URLRwbaaSummary}" data-toggle="modal" data-target="#myModal" data-remote="false"> 
													<span id="contactRwbaaInfoBtn" class="btn btn-danger btn-outline" aria-hidden="true" >  RWBAA Information  </span>
												</a>  
                                            </apex:outputpanel>												
                                        </div>   
                                        <div class="col-xs-1 col-xs-offset-1 txt_right pad_rgt0">
                                            <apex:outputpanel rendered="{!hasEditAccess && isFullAccessUser}" layout="none">
                                                <a href="#" id="contactEditLink" class="navx" onClick="disablePropagation(event); editContact(); return false;">
                                                    <!-- ********************** Edit **************** -->
                                                    <span id="contactEditBtn" class="btn btn-danger btn-outline" aria-hidden="true">Edit</span>
                                                </a>
                                            </apex:outputpanel>
                                            
                                            <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" layout="none">
                                                <a href="#" class="navx" onClick="disablePropagation(event);">
                                                    <!-- ********************** Edit **************** -->
                                                    <span class="btn btn-danger btn-outline disabled" aria-hidden="true">Edit</span>
                                                </a>
                                            </apex:outputpanel>
                                        </div>
                                    </div>
                                
                                    <div id="contactDetailsHeaderEdit" style="display:none">
                                <!-- ************** Contact Info Edit Header ************* -->
                                    
                                            <div class="col-sm-2 col-sm-offset-7 txt_right pad_rgt0">
                                                <a href="#contactForm" class="navx" id="add-contact-validate-form" onClick="disablePropagation(event);">
                                                    <!--onClick="validateForm('account-contact', displayContactControllerAction); return false;"-->
                                                    <!-- ********************** Save **************** -->
                                                    <span class="btn btn-danger" aria-hidden="true">Save</span>
                                                </a>
                                                <a href="" class="navx" onclick="disablePropagation(event);  ContactDisplay();return false;">
                                                    <!-- ********************** Cancel **************** -->
                                                    <span class="btn btn-danger btn-outline" aria-hidden="true">Cancel</span>
                                                </a>
                                            </div>
                                    </div>
                               </div>
                            </div>
                        </div>
                        <div class="panel">
                        <div id="contactDetails">
                            <!-- ************** Selected Contact Info Header ************* -->
                            <apex:outputPanel id="ContactView">
                                <apex:pagemessages id="showContactError1"></apex:pagemessages>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Contact</h4>
                                        <div class="hgt15" />
                                    </div>
                                    <!-- ************** Selected Contact Info ************* -->
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="firstName">First Name</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="cfirstName" value="{!contactFirstName}" />
                                        </div>
                                        <label class="form control-label col-xs-2 pad_rgt0" for="lastName">Last Name</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="clastName" value="{!contactLastName}" />
                                        </div>
                                        <label class="col-xs-2 pad_rgt0 mrg_top10">&nbsp;</label>
                                        <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                        <div class="col-xs-3">
                                            <span class="rw-dark-red dis_none "></span>
                                        </div>
                                        <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                        <div class="col-xs-3">
                                            <span class="rw-dark-red dis_none "></span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="contactEmail">Email Address</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="ccontactEmail" value="{!contactEmail}" />
                                        </div>
                                        
                                        <label class="form control-label col-xs-2 pad_rgt0" for="contactPhone">Contact Phone #</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="ccontactPhone" value="{!contactPhoneNo}" />
                                        </div>
                                        <label class="col-xs-2 pad_rgt0 mrg_top10">&nbsp;</label>
                                        <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                        <div class="col-xs-3">
                                            <span class="rw-dark-red dis_none "></span>
                                        </div>
                                        <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                        <div class="col-xs-3">
                                            <span class="rw-dark-red dis_none "></span>
                                        </div>
                                    </div>
                                    <apex:outputPanel rendered="{!If(createContact.Id!=null,true,false)}">
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="VerifiedEmail"> Manually Verified Email </label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputField id="verifiedEmail" value="{!createContact.Manually_Verified_Email__c}" />
                                        </div>
                                    </div>
                                    </apex:outputPanel>
                                    
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="contactAddress">Contact Address</label>
                                        <div class="col-xs-3 pad_top7">
                                            <apex:outputText id="ccontactAddress" value="{!ContactCompleteAddress }" />
                                        </div>
                                        <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                        <div class="col-xs-3">
                                            <span class="rw-dark-red dis_none "></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="role">Role</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="crole" value="{!SelectedRoles}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" for="title">Title</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="ctitle" value="{!contactTitle}" />
                                    </div>
                                    <label class="col-xs-2 pad_rgt0 mrg_top10">&nbsp;</label>
                                    <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                    <div class="col-xs-3">
                                        <span class="rw-dark-red dis_none "></span>
                                    </div>
                                    <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                    <div class="col-xs-3">
                                        <span class="rw-dark-red dis_none "></span>
                                    </div>
                                    <div class="">
                                        <br/>
                                        <br/>
                                    </div>
                                </div>
                                <apex:outputPanel rendered="{!renderUserType}">
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="role">RWBAA User Type</label>
                                    <div class="col-xs-3 pad_top7">
                                        <apex:outputText id="userType" value="{!selectedUsertype}" />
                                    </div>
                                    <label class="form control-label col-xs-2 pad_rgt0" />
                                    <div class="col-xs-3 pad_top7">
                                        <span ></span>
                                    </div>
                                    <label class="col-xs-2 pad_rgt0 mrg_top10">&nbsp;</label>
                                    <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                    <div class="col-xs-3">
                                        <span class="rw-dark-red dis_none "></span>
                                    </div>
                                    <label class="col-xs-2 pad_rgt0 mrg_top5" />
                                    <div class="col-xs-3">
                                        <span class="rw-dark-red dis_none "></span>
                                    </div>
                                    <div class="">
                                        <br/>
                                        <br/>
                                    </div>
                                </div>
                                </apex:outputPanel>                                
                            </apex:outputPanel>
                        </div>
                        <!-- end container div contact info -->
                        <!-- begin container div contact info edit -->
                         <div id="contactEdit" style="display:none">
                                <!--<apex:form >-->
                                <!--<apex:pagemessages id="showContactError"></apex:pagemessages>-->
                                <apex:actionRegion >
                                    <apex:actionFunction name="displayContactControllerAction" action="{!createContact}" oncomplete="ContactDisplay();" reRender="Afterinsert, ContactListView, pgbcontact, ContactView, ContactViewEdit, SameAsPrimaryContactInfo,showContactError1" />
                                    <apex:actionFunction name="deleteContact" action="{!deleteContact}" status="deleteStatus" rerender="ContactListView,pgbcontact">
                                        <apex:param name="firstParam" assignTo="{!deletedContactId}" value="{!Con.ID}" />
                                    </apex:actionFunction>
                                    
                                    <!-- ************** Selected Contact Info Edit Header ************* -->
                                    
                                    

                                    <div class="panel-body">                                   
                                        
                                        <div class="row">
                                            <div class="custom_space_20" />
                                            <h4 class="text-uppercase title-text pad_lft15">Contact</h4>
                                            <div class="hgt15" />
                                        </div>
                                        <!-- ************** Selected Contact Info Edit ************* -->
                                        <apex:outputpanel id="ContactViewEdit">
                                            <div class="row">
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="firstName">First Name</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control" id="firstName" value="{!contactFirstName}" />
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="lastName">Last Name</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control" id="lastName" value="{!contactLastName}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="contactPhone">Contact Phone #</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control mask-phone req-phone account-contact" id="contactPhone" value="{!contactPhoneNoEdit}" />
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="contactPhoneExt">Extension</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control account-contact" id="contactPhoneExt" value="{!contactPhoneNoExt}" maxlength="4" onkeypress="return NumbersOnly(event);"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="contactEmail">Email Address</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control req-email account-contact" id="contactEmail" value="{!contactEmail}" />
                                                    </div>
                                                </div>                                                
                                            </div>
                                            <apex:outputPanel rendered="{!If(createContact.Id!=null,true,false)}">
                                            <div class="row">
                                                <div class="form-group col-xs-6">
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="verifiedemail"> Manually Verified Email </label>
                                                    <div class="col-xs-6">
                                                        <apex:inputCheckbox styleClass="" id="ManuallyVerifiedEmail" value="{!ManuallyVerifiedEmail}" />
                                                    </div>
                                                </div>                                                
                                            </div>
                                            </apex:outputPanel>
                                            
                                            <div class="row">
                                                <!-- ************** Contact Info Edit - Address - Same or Different? ************* -->
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="contactAddress">Contact Address</label>
                                                    <div class="col-xs-8 radio pad_top0">
                                                        <apex:selectRadio id="ContactAddressPreferance" value="{!SelectContactAddressOptions}" styleClass="radio_btn" onchange="ContactAddress(this)">
                                                            <apex:selectoptions value="{!ContactAddressOptions}" />
                                                        </apex:selectRadio>
                                                    </div>
                                                </div>
                                                <!-- ************** Contact Info Edit - begin div address same ************* -->
                                                <apex:outputPanel id="contactPhysicalAddress">
                                                    <div id="SameAsAccountAddress">
                                                        <div class="form-group">
                                                            <label class="clr_blk form control-label col-xs-2 pad_rgt0"></label>
                                                            <div class="col-xs-8">
                                                                <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                                    <b>{!SameAsAccountAddress}</b>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel id="contactBillingAddress">
                                                    <div id="SameAsBillingAddress" class="dis_none">
                                                        <div class="form-group">
                                                            <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                            <div class="col-xs-8">
                                                                <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                                    <b>{!SameAsBillingAddress}</b>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>    
                                                </apex:outputPanel>
                                                <!-- ************** Contact Info Edit - end div address same ************* -->
                                            </div>
                                            <!-- ************** Contact Info Edit - beign div address different ************* -->
                                            <div class="row">
                                                <div id="DifferentAddress" class="contactInfo dis_none">
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="contactStreet">Street Address</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText id="contactStreet" styleClass="form-control req-address account-contact" value="{!contactStreet}" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="contactCity">City</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText id="contactCity" styleClass="form-control req-city account-contact" value="{!contactCity}" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                    <span>
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="contactState">State / Province</label>
                                                        <div class="col-xs-6">
                                                            <!--<apex:inputText id="contactState" styleClass="form-control" value="{!contactState}" /> -->
                                                            <apex:selectList id="contactState" value="{!contactState}" styleClass="state contact form-control" onchange="updateCountry('contactInfo')" multiselect="false" size="1">
                                                                <apex:selectoptions value="{!ContactStateOptions}" />
                                                            </apex:selectList>
                                                        </div>
                                                    </span>    
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="contactZip">Zip / Postal Code</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText id="contactZip" styleClass="form-control req-zip account-contact" value="{!contactZipCode}" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                    <span>
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="contactCountry">Country</label>
                                                    <div class="col-xs-6">
                                                        <apex:selectList id="contactCountry" value="{!contactCountry}" styleClass="form-control country inputReset" onchange="updateState('contactInfo', 'contact')" multiselect="false" size="1" onblur="">
                                                            <apex:selectoptions value="{!CountryOptions}" />
                                                        </apex:selectList>
                                                    </div>
                                                    </span>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <!-- ************** Contact Info Edit - end div address different ************* -->
                                                <div class="form-group col-xs-6">
                                                    <label class="col-xs-4 pad_rgt0" />
                                                            <div class="col-xs-7">
                                                                <p class="rw-grey">You may select up to four roles by holding the <br/> Command key on Mac and Control key on Windows.</p>
                                                            </div>
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="role">Role</label>
                                                    <div class="col-xs-6">
                                                        <apex:selectList id="contactRole" value="{!SelectedRoles}" styleClass="form-control" multiselect="true" size="5" style="height:108px !important">
                                                            <apex:selectOptions value="{!ContactRoles}" />
                                                        </apex:selectList>
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-6">
                                                    <label class="col-xs-4 pad_rgt0" />
                                                    <div class="col-xs-6">
                                                        <p class="rw-grey"><br/><br/><br/></p>
                                                    </div>
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="title">Title</label>
                                                    <div class="col-xs-6">
                                                        <apex:inputText styleClass="form-control req-title account-contact" id="title" value="{!contactTitle}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <apex:outputPanel rendered="{!renderUserType}">
                                            <div class="row">
                                                <!-- ************** Contact Info Edit - end div address different ************* -->
                                                <div class="form-group col-xs-6">                                                    
                                                    <label class="form control-label col-xs-4 pad_rgt0" for="role">RWBAA User Type</label>
                                                    <div class="col-xs-6" id="userTypeDiv">
                                                        <apex:selectList id="contactUserType" value="{!SelectedUserType}" styleClass="form-control" multiselect="false" size="1" rendered="{!!contactMSTS}">
                                                            <apex:selectOptions value="{!UserTypes}" />
                                                        </apex:selectList>
                                                    </div>
                                                    <div class="col-xs-6" id="userTypeLockedDiv">
                                                        <div class="col-xs-6 pad_top7">
                                                            <apex:outputText id="userTypelocked" value="{!selectedUsertype}" rendered="{!contactMSTS}"/>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            </apex:outputPanel>
                                            <script>
                                            $(document).ready(function() {
                                                
                                                function diffContactAddress() {
                                                    if ($('input[name="AccountSummary:formId:ContactAddressPreferance"][value="Different"]').is(":checked")) {
                                                        $('input[name="AccountSummary:formId:contactStreet"]').addClass("req-address");
                                                        $('input[name="AccountSummary:formId:contactCity"]').addClass("req-city");
                                                        $('input[name="AccountSummary:formId:contactZip"]').addClass("req-zip");
                                                    } else {
                                                        $('input[name="AccountSummary:formId:contactStreet"]').removeClass("req-address");
                                                        $('input[name="AccountSummary:formId:contactCity"]').removeClass("req-city");
                                                        $('input[name="AccountSummary:formId:contactZip"]').removeClass("req-zip");
                                                    }
                                                }
                                                $('input[name="AccountSummary:formId:ContactAddressPreferance"]').change(function() {
                                                    diffContactAddress();
                                                });
                                                diffContactAddress();


                                                $(".mask-phone").mask("(999) 999-9999");
                                            });
                                            </script>
                                        </apex:outputpanel>
                                        <div class="row summary_section_3">
                                            <br/>
                                            <br/>
                                        </div>
                                    </div>
                                </apex:actionRegion>
                            </div>
                        <div class="row hr_row_style col-xs-12">
                            <hr class="hr_style"></hr>
                        </div>
                        <!-- ************** Related Contact List Header ************* -->
                        <div class="panel-body">
                            <apex:actionRegion >
                                <apex:actionFunction name="ViewContact" action="{!viewContact}" status="ViewStatus" rerender="ContactView,ContactViewEdit,Afterinsert" oncomplete="contactAddressOption(); ">
                                    <apex:param name="firstParam" assignTo="{!deletedContactId}" value="{!Con.ID}" />
                                </apex:actionFunction>
                                <div class="col-xs-12 pad_lft0 pad_rgt0 mrg_btm10">
                                    <h4 class="text-uppercase title-text pad_lft15 col-sm-4">Related Contacts</h4>
                                    <apex:outputpanel rendered="{!hasEditAccess && isFullAccessUser}" layout="none">
                                        <span class="btn btn-danger btn-outline mr-0 flt_rgt" aria-hidden="true" onClick="resertContact();">Add More</span>
                                    </apex:outputpanel>
                                    <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" layout="none">
                                        <span class="btn btn-danger btn-outline mr-0 flt_rgt disabled" aria-hidden="true">Add More</span>
                                    </apex:outputpanel>
                                    <apex:actionFunction name="resertContact" action="{!resetContactFields}" oncomplete="ContactHideView(); contactAddressOption(); restoreEdit();" reRender="ContactViewEdit, ContactView" />
                                </div>
                                <!-- ************** Related Contact List ************* -->
                                <apex:pageBlock id="pgbcontact">
                                    <apex:pageBlockTable id="ContactListView" columnClasses="table-striped" styleClass="col-sm-12 display dataTable no-footer pad_top10 pad_btm10 pad_lft10" value="{!contactList}" var="Con">
                                        <apex:column headerValue="Name" styleClass="pad_top5 pad_btm5" value="{!Con.FirstName} {!Con.LastName}" />
                                        <apex:column headerValue="Phone" styleClass="black" value="{!Con.Phone}" />
                                        <apex:column headerValue="Role" styleClass="black" value="{!Con.Role__c}" />
                                        <apex:column headerValue="Type" styleClass="black" value="{!Con.Contact_Identifier__c}" />
                                        <apex:column headerValue="Email Status" styleClass="black" value="{!Con.tdc_tvte__Result_text__c}" />
                                        <apex:column headerValue="MSTS User" styleClass="black" value="{!Con.MSTS_User__c}" />
                                        <apex:column >
                                            <a id="EditContactId" class="view-contact" onclick="ViewContact('{!Con.ID}'); return false;">View</a>
                                        </apex:column>
                                        <!-- <apex:column headerValue="Delete">
                                            <a id="DeleteContactId" onclick="if(confirm('Do You want to delete Contact (Contact Name : {!Con.Name}) ? '))deleteContact('{!Con.ID}'); return false;">Delete</a>
                                        </apex:column> -->
                                    </apex:pageBlockTable>
                                </apex:pageBlock>
                            </apex:actionRegion>
                        </div>
                        <div class="row summary_section_3">
                            <br/>
                            <br/>
                        </div>
                    </div> <!-- Panel -->    
                    </apex:form>
                    
                    <!-- endcontainer div contact info -->
                    
                    
                    
                    <!-- begin container div billing info -->
                    <apex:form id="billingForm">
                    
                        
                            <!-- begin container div class billing header -->
                            <div id="billingHeader" class="billingHeader accordion billing">
                                <!-- ************** Credit and Billing Info Header ************* -->
                                <div class="row">
                                    <div class="summary_section_2 col-xs-12 mini_text_padder pheader">
                                        <div class="col-xs-4">
                                            <span class="text-uppercase sub-header">Credit &amp; Billing Information</span>
                                        </div>
                                        
                                    <div id="billingDetailsHeaderView">    
                                        <div class="col-xs-1 col-xs-offset-7 txt_right pad_rgt0">
                                            <!-- ********************** Edit **************** -->
                                            <apex:outputPanel id="bothBtns">
                                                <apex:outputpanel rendered="{!(hasEditAccess && isFullAccessUser)}" id="editAccountAction">
                                                    <a href="#" id="editBtnCreditInfo" class="icons_edit" onClick="disablePropagation(event); editASBilling(); return false;">
                                                        <span class="btn btn-danger btn-outline" aria-hidden="true">Edit</span>
                                                    </a>
                                                </apex:outputPanel>
                                                <apex:outputpanel rendered="{!(!hasEditAccess || !isFullAccessUser)}" id="disabledEditAccountAction">
                                                    <a href="#" id="DisabledEditBtnCreditInfo" disabled="true" class="icons_edit" onClick="disablePropagation(event)">
                                                        <span class="btn btn-danger btn-outline disabled" aria-hidden="true">Edit</span>
                                                    </a>
                                                </apex:outputPanel>
                                            </apex:outputpanel>
                                        </div>
                                     </div>
                                    <!-- ************** Credit and Billing Info Header Edit ************* -->
                                    
                                      <div id="billingDetailsHeaderEdit" class="dis_none">        
                                            <div class="col-sm-2 col-sm-offset-6 txt_right pad_rgt0">
                                                <!-- onClick="SaveCreditInfo(false); return false;"-->
                                                <!-- ********************** Save **************** -->
                                                <span id="billing-info-validate-save-js" onclick="disablePropagation(event); validateCreditBillingInfo();" class="btn btn-danger" aria-hidden="true">Save</span>
                                                <a href="" class="navx" onclick="disablePropagation(event); displayBilling(); return false;">
                                                    <!-- ********************** Cancel **************** -->
                                                    <span class="btn btn-danger btn-outline" aria-hidden="true">Cancel</span>
                                                </a>
                                            </div>
                                      </div>        
                                
                                        
                                        
                                    </div>
                                </div>
                            </div>
                           <div class="panel">
                            <!-- ***** Billing Address (begin) ***** -->
                            <div id="billingDetails">
                            <apex:outputPanel id="billingDetailsPanel">
                            
                            <apex:pagemessages id="showCreditSectionError"></apex:pagemessages> 
                            
                             <div class="panel-body"> 
                                 <div class="row">
                                    <div class="custom_space_20" />
                                    <h4 class="text-uppercase title-text pad_lft15">Billing Address</h4>
                                    <div class="hgt15" />
                                 </div>
                                 <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingAddress">Same as Company</label>
                                    <div class="col-xs-8 radio pad_top0">
                                        <apex:selectRadio id="billingAddressPreference" value="{!selectBillingAddressOption}" styleClass="radio_btn" disabled="true">
                                            <apex:selectoptions value="{!billingcontactOptions}" />
                                        </apex:selectRadio>
                                    </div>
                                </div>                         
                            </div> 
                               <apex:outputPanel id="billingAddressSameAsCompany" rendered="{!billingSame}">
                                   <div class="form-group">
                                       <label class="form control-label col-xs-2 pad_rgt0"></label>
                                       <div class="col-xs-8">
                                           <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                               {!SameAsAccountAddress}
                                           </label>
                                       </div>
                                   </div>                                   
                               </apex:outputPanel>
                               
                               <apex:outputPanel id="billingAddressDetails" rendered="{!!billingSame}">                                      
                                       
                                        
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bline1">Address Line 1</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bline1" value="{!billingLine1}" />
                                            </div>
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bline2">Address Line 2</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bline2" value="{!billingLine2}" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bline3">Address Line 3</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bline3" value="{!billingLine3}" />
                                            </div>
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bcity">City</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bcity" value="{!billingCity}" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bstate">State / Province</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bstate" value="{!IF(billingState == '--Select--'," ", billingStateLabel)}" />
                                            </div>
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bzip">Zip / Postal Code</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bzip" value="{!billingZipCode}" />
                                            </div>                                   
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="bcountry">Country</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="bcountry" value="{!billingCountryLabel}" />
                                            </div>
                                        </div>
                                        
                                        
                                </apex:outputPanel>
                                
                                <!-- ***** Billing Address (end) ***** -->
                            
                            <div class="noInvoicing">
                                <div class="row hr_row_style col-xs-12">
                                    <hr class="hr_style"></hr>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Invoicing</h4>
                                        <div class="hgt15" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="invoicing">Requires Invoicing</label>
                                        <div class="col-xs-3 radio pad_top0">
                                            <apex:selectRadio id="invoicePreferanceId" value="{!SelectinvoiceOptions}" styleClass="radio_btn6 " onselect="InvoicePreference(this.value)" disabled="true">
                                                <apex:selectoptions value="{!invoiceOptions}" />
                                            </apex:selectRadio>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- invoiceParentMaster div start -->
                            <apex:outputPanel id="invoiceParentPanel" rendered="{!hasParent}">
                                <div id="invoiceParentMaster">
                                    <apex:outputPanel rendered="{!NOT(ISNULL(parentAccountId))}">
                                        <div class="panel-body">
                                            <div class="form-group" id="invoiceParentAccount">
                                                <label class="form control-label col-xs-2 pad_rgt0">Invoice Parent Account</label>
                                                <div class="col-xs-8 radio pad_top0">
                                                    <apex:selectRadio id="invoiceParentRadio" value="{!SelectInvoiceParent}" styleClass="radio_btn6" disabled="true">
                                                        <!-- <apex:selectoptions value="{!SelectInvoiceParent}" /> -->
                                                        <apex:selectoption itemValue="Yes" itemLabel="Yes" />
                                                        <apex:selectoption itemValue="No" itemLabel="No" />
                                                    </apex:selectRadio>
                                                    <apex:outputPanel id="showbillingCreditError">
                                                        <script type="text/javascript">
                                                        function continueOnCheck() {
                                                            var hasServerError = {!hasErrors
                                                            };
                                                            if (!hasServerError) {
                                                                $('#invoiceParentAccount').removeClass('has-error')
                                                                ChangeAccordion(3);
                                                            } else {
                                                                $('#invoiceParentAccount').addClass('has-error')
                                                            }
                                                        }
                                                        </script>
                                                        <!--
                                                        <apex:repeat value="{!errors}" var="error" id="errorMessage2">
                                                            <apex:outputText styleClass="error" value="{!error}" id="errorMessage2" />
                                                            <br/>
                                                        </apex:repeat> 
                                                        -->
                                                    </apex:outputPanel>
                                                </div>
                                            </div>
                                            <apex:outputPanel id="invoiceParentYesPanel" rendered="{!isInvoiceParentAccount}">
                                                <div id="invoiceParentYes">
                                                    <div class="form-group mrg_btm0">
                                                        <label class="form control-label col-xs-2 pad_rgt0">Billing</label>
                                                        <div class="col-xs-8 radio pad_top0">
                                                            <apex:selectRadio id="billingParentRadio" value="{!selectBillingParent}" styleClass="radio_btn wid50" disabled="true">
                                                                <!-- <apex:selectoptions value="{!SelectBillingParent}" /> -->
                                                                <apex:selectoption itemValue="Centralized" itemLabel="Centralized" />
                                                                <apex:selectoption itemValue="Decentralized" itemLabel="Decentralized" />
                                                            </apex:selectRadio>
                                                        </div>
                                                    </div>
                                                    <label class=" col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8 pad_top0">
                                                        <p class="rw-grey">By choosing centralized, this accounts invoices will be sent to the parent account utilizing the same terms and billing frequency. By choosing decentralized, you are able to direct the invoices to a new address and will bill independent from the parents invoices. The account will still utilize the parents credit line.</p>
                                                    </div>
                                                    <div class="col-sm-12 mrg_btm10">&nbsp;
                                                    </div>
                                                    <apex:outputPanel id="centralizedBillingPanel" rendered="{!isCentralizedBilling}">
                                                        <div id="centralizedBilling">
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFirstName">First Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFirstName" styleClass="" value="{!parentBillingContact.FirstName}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_lft0 pad_rgt0" for="parentLastName">Last Name</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentLastName" styleClass="" value="{!parentBillingContact.LastName}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentEmail">Email</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentEmail" styleClass="" value="{!parentBillingContact.Email}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_lft0 pad_rgt0" for="parentPhone">Phone</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentPhone" styleClass="" value="{!parentBillingContact.Phone}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentlegalNameDisplay">Legal Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentLegalNameDisplay" styleClass="" value="{!parentAccount.Legal_Name__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentFedId">Federal ID Number</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentFedId" styleClass="" value="{!parentAccount.IA_Federal_ID_Nbr__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFreq">Billing Frequency</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFreq" styleClass="" value="{!parentAccount.Billing_Frequency__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentDeliveryBy">Invoice Delivery By</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentDeliveryBy" styleClass="" value="{!parentAccount.Invoice_Delivery_Method__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentPaymentTerms">Payment Terms</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentPaymentTerms" styleClass="" value="{!parentAccount.BPC_Payment_Terms__c}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentCreditLimit">Approved Credit Limit</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentCreditLimit" styleClass="" value="{!parentAccount.Credit_Limit__c}" />
                                                                </div>
                                                                 
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="emailToCentralized">Email Application To</label>
                                                                <div class="col-xs-3 pad_top7">
                                                                    <apex:outputText id="emailToCentralized" value="{!EmailApplicableTo}" />
                                                                </div> 
                                                            </div>
                                                            <div class="row summary_section_3">
                                                                <br/>
                                                                <br/>
                                                            </div> 
                                                        </div>
                                                    </apex:outputPanel>
                                                    <!-- centralizedBilling div end -->
                                                    <apex:outputPanel id="decentralizedBillingPanel" rendered="{!isDecentralizedBilling}">
                                                        <div class="decentralizedBilling" id="decentralizedBilling">
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentlegalNameDisplay2">Legal Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentLegalNameDisplay2" styleClass="" value="{!parentAccount.Legal_Name__c}" />
                                                                </div>
                                                               
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentFedId2">Federal ID Number</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentFedId2" styleClass="" value="{!parentAccount.IA_Federal_ID_Nbr__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row"> 
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFreq2">Billing Frequency</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFreq2" styleClass="" value="{!parentAccount.Billing_Frequency__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentCreditLimit2">Approved Credit Limit</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentCreditLimit2" styleClass="" value="{!parentAccount.Credit_Limit__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentPaymentTerms2">Payment Terms</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentPaymentTerms2" styleClass="" value="{!parentAccount.BPC_Payment_Terms__c}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="emailToDecentralized">Email Application To</label>
                                                                <div class="col-xs-3 pad_top7">
                                                                    <apex:outputText id="emailToDecentralized" value="{!EmailApplicableTo}" />
                                                                </div>                                                              
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <!--decentralizedBilling div end -->
                                                </div>
                                            </apex:outputPanel>
                                        </div>
                                        <!--invoiceParentYes div end -->
                                        <!-- Show noInvoiceId Save and Continue Button when showing this div -->
                                    </apex:outputPanel>
                                </div>
                            </apex:outputPanel>
                            <!-- invoiceParentMaster div end -->
                            <!-- begin container div  billing fields -->
                            <apex:outputPanel id="billingFieldsPanel">
                                <div id="billingFields" class="dis_none">
                                    <!-- ************** Billing Contact Info Header ************* -->
                                    <div class="row hr_row_style col-xs-12">
                                        <hr class="hr_style"></hr>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="custom_space_20" />
                                            <h4 class="text-uppercase title-text pad_lft15">Billing Contact</h4>
                                            <div class="hgt15" />
                                        </div>
                                        <!-- ************** Billing Contact Info ************* --> 
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="billingContact">Same as Primary</label>
                                            <div class="col-xs-8 radio pad_top0">
                                                <apex:selectRadio id="ContactbillPreferance" value="{!SelectbillingcontactOptions}" styleClass="radio_btn" disabled="true">
                                                    <apex:selectoptions value="{!billingcontactOptions}" />
                                                </apex:selectRadio>
                                            </div>
                                        </div>
                                        <div class="same_primay" id="same_primary_display">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <apex:outputPanel id="SameAsPrimaryContactInfoDisplay">
                                                            <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                                {!SameAsPrimaryContactInfo}
                                                            </label>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>                                
                                        <div class="form-group" id="different_primary_display">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="billingContact"></label>
                                            <div class="col-xs-8 pad_top">
                                                <p class="text-uppercase">                                                                                                       
                                                    {!billingFirst} {!billingLast}, {!billingEmail}, {!billingPhone}, {!billingTitle}
                                                </p>
                                                
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="billingContact">Contact Address</label>  
                                            <div class="col-xs-8 radio pad_top0">
                                                <apex:selectRadio id="billContactAddressPreferance" value="{!SelectContactAddrBillOptions}" styleClass="radio_btn" disabled="true">
                                                    <apex:selectoptions value="{!contactAddressBillingOptions}" />
                                                </apex:selectRadio>
                                            </div>
                                        </div>
                                        <div class="same_conact" id="same_contact_display">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                            {!SameAsAccountAddress}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="same_conact dis_none" id="same_billing_contact_display">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                            {!SameAsBillingAddress}
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        <div class="form-group" id="different_contact_display">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="billingContact"></label>
                                            <div class="col-xs-8 pad_top">
                                                <p class="text-uppercase">
                                                    {!billingStreet}, {!mailingCity}, {!mailingState}, {!mailingCountry}, {!mailingzipCode}
                                                    
                                                </p>
                                            </div>
                                        </div>
                                        
                                        <div id="paymentTermsDiv">
                                        
                                        <div class="row hr_row_style col-xs-12">
                                            <hr class="hr_style"></hr>
                                        </div>
                                        <!-- ************** Payment Terms Header ************* -->
                                        <div class="row">
                                            <div class="custom_space_20" />
                                            <h4 class="text-uppercase title-text pad_lft15">Payment Terms &amp; Invoice Preferences</h4>
                                            <div class="hgt15" />
                                        </div>
                                        <!-- ************** Payment Terms Info ************* -->
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="legalNameDisplay">Legal Name</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="legalNameDisplay" value="{!legalName}" />
                                            </div>                                            
                                            <label class="form control-label col-xs-2 pad_rgt0" for="terms">Payment Terms</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="Pterms" value="{!displayPaymentTerms}" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="billingFrequency">Billing Frequency</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="PbillingFrequency" value="{!selectbillingFrequency}" />
                                            </div>                                            
                                            <label class="form control-label col-xs-2 pad_rgt0" for="paymentBy">Federal ID Number</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="readFederalIdNumber" value="{!federalIdNumber}" />
                                            </div>
                                        </div>

                                        <div class="form-group">  
                                            <label class="form control-label col-xs-2 pad_rgt0" for="deliveryBy">Invoice Delivery By</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="PdeliveryBy" value="{!displayInvoiceDelivery}" />
                                            </div>                                            
                                            <label class="form control-label col-xs-2 pad_rgt0" for="requestedCreditLimit">Requested Credit Limit</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="requestedCreditLimit" value="{!SelectiReqCreditLimitOptions}" />
                                            </div>       
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="invoiceAttr">Invoice Attributes Required</label>                                            
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="invoiceAttr" value="{!invoiceAttrLabels}" />
                                            </div>                                            
                                            <label class="form control-label col-xs-2 pad_rgt0" for="creditStatus">Credit Status</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="PselectCreditStatus" value="{!selectCreditStatus}" />
                                            </div>                                            
                                        </div>
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="emailToView">Email Application To</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="emailToView" value="{!EmailApplicableTo}" />
                                            </div>                                             
                                            <label class="form control-label col-xs-2 pad_rgt0" for="CreditLimit">Approved Credit Limit</label>
                                            <div class="col-xs-3 pad_top7">
                                                <apex:outputText id="PapprovedCreditLimit" value="{!creditLimit}" />
                                            </div>                                         
                                        </div> 
                                        <div class="form-group">
                                            <label class="form control-label col-xs-2 pad_rgt0" for="viewStandardApp">RWBAA Standard Application</label>
                                            <div class="radio col-xs-3 pad_top0">
                                                <apex:selectRadio id="standardAppView" value="{!selectStandardApplication}" styleClass="radio_btn5" disabled="true">
                                                    <apex:selectOptions value="{!invoiceOptions}"/>
                                                </apex:selectRadio>
                                            </div>                              
                                        </div>
                                        </div> <!-- paymentTerms Div --> 
                                    </div>
                                </div>
                            </apex:outputPanel>
                            </apex:outputPanel>
                        </div>
                        <!-- end container div billing info -->
                        <!-- begin container div billing info edit -->
                        <apex:actionRegion >
                            <div id="resendCreditModal" class="modal fade inmodal">
                                <div class="modal-dialog">
                                    <div class="modal-content modal-bg">
                                        <div class="modal-header header-border txt_center black">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            <h4 class="modal-title modal-header-text"><i id="resendModalIcon"></i> <span id="resendModalTitle">Confirmation</span></h4>
                                        </div>
                                        <div class="pad_top_btm40 modal-bg">
                                            
                                            <p id="resendModalMsg" class="sub_tilte_clr modal-body-text">
                                            <div class="col-lg-12">
                                                <div class="col-lg-2"> </div>
                                                <div class="col-lg-8 sub_tilte_clr mrg_btm0 modal-body-text">Email Application To</div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="col-lg-2"> </div> 
                                                <div class="col-lg-8">
                                                     <apex:input id="emailToModal" type="email" styleClass="form-control clearInput" value="{!EmailApplicableToModal}" html-placeholder="example@Company.com" />
                                                 </div>
                                                 <div class="col-lg-2"></div> 
                                             </div>
                                             <br>&nbsp;</br>
                                             <div class="col-lg-12">
                                                 <div class="col-lg-2"> </div>
                                                 <div class="col-lg-8 sub_tilte_clr mrg_btm0 modal-body-text">RWBAA Standard Application</div>
                                             </div>
                                             <div class="col-lg-12">
                                                 <div class="col-lg-2"> </div> 
                                                 <div class="col-lg-8">
                                                     <apex:selectRadio id="standardAppResendModal" value="{!selectStandardApplication}" styleClass="radio_btn5">
                                                        <apex:selectOptions value="{!invoiceOptions}"/>
                                                     </apex:selectRadio>
                                                 </div> 
                                             </div>
                                            </p>
                                            <br>&nbsp;</br>
                                        </div>
                                        <div class="modal-footer footer-border">
                                            <ul class="list-inline col-sm-12 mrg_all0 padd_all0 ">
                                                <li class="col-sm-12 popup_close">
                                                    <button id="resendBtnTwoName" type="button" class="btn btn-danger  btn-outline">Cancel</button>   
                                                    <button id="resendBtnOneName" type="button" class="btn btn-danger ">Resend Credit Application</button>
                                                                                     
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- begin container div billing info edit -->
                            <div id="billingEdit" style="display:none">
                            <apex:outputPanel id="billingEditPanel">
                                <apex:actionFunction name="SaveCreditInfo" action="{!updateCreditInfo}" reRender="billingDetailsPanel, billingEditPanel, showBillingAccountError, Afterinsert, bothBtns, contactBillingAddress" oncomplete="displayBilling(); ShowSentCreditInfoPopUp();" status="loadSplashScreen">
                                    <apex:param name="firstParam" assignTo="{!creditappFlag}" value="" />
                                </apex:actionFunction>
                               
                                
                                <!-- ***** Billing Address (begin) ***** -->
                            <!-- <apex:pagemessages id="showCreditSectionError"></apex:pagemessages> -->

                             <div class="panel-body">
 
                                 <div class="row">
                                    <div class="custom_space_20" />
                                    <h4 class="text-uppercase title-text pad_lft15">Billing Address</h4>
                                    <div class="hgt15" />
                                 </div>
                                 <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingContact">Same as Company</label>
                                    <div class="col-xs-8 radio pad_top0">
                                        <apex:selectRadio id="billingAddressPreferenceEdit" value="{!selectBillingAddressOption}" styleClass="radio_btn" onselect="BillingAddress(this)" onchange="BillingAddress(this)" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                            <apex:selectoptions value="{!billingcontactOptions}" />
                                        </apex:selectRadio>                                        
                                        <apex:selectRadio id="billingAddressPreferenceEditLock" value="{!selectBillingAddressOption}" styleClass="radio_btn" disabled="true" rendered="{!(isNeedToLock || !hasEditAccess)}">
                                            <apex:selectoptions value="{!billingcontactOptions}" />
                                        </apex:selectRadio>                                        
                                    </div> 
                                </div>                         
                            </div>
                            <div id="SameAsAccountBilling">
                                <div class="form-group">
                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                    <div class="col-xs-8">
                                        <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                              <b>{!SameAsAccountAddress}</b>
                                        </label>
                                    </div>
                                </div>
                            </div>                    
                            <div id="billingAddress" class="billingAddress">    
                            <div class="form-group">
                                <label class="form control-label col-xs-2 pad_rgt0" for="billingLine1">Address Line 1</label>
                                <div class="col-xs-3">
                                    <apex:inputText id="billingLine1" styleClass="form-control"  value="{!billingLine1}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                    <div class="pad_top7">
                                        <apex:outputText styleClass="form-text" value="{!billingLine1}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                </div>                       
                                
                                <label class="form control-label col-xs-2 pad_rgt0" for="billingLine2">Address Line 2</label>
                                <div class="col-xs-3">
                                    <apex:inputText id="billingLine2" styleClass="form-control"  value="{!billingLine2}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                    <div class="pad_top7">
                                        <apex:outputText styleClass="form-text" value="{!billingLine2}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                </div>                                
                            </div>
                            <div class="form-group">
                                <label class="form control-label col-xs-2 pad_rgt0" for="billingLine3">Address Line 3</label>
                                <div class="col-xs-3">
                                    <apex:inputText id="billingLine3" styleClass="form-control"  value="{!billingLine3}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                    <div class="pad_top7">
                                        <apex:outputText styleClass="form-text" value="{!billingLine3}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                </div>
                                
                                <label class="form control-label col-xs-2 pad_rgt0" for="billingCity">City</label>
                                <div class="col-xs-3">
                                    <apex:inputText id="billingCity" styleClass="form-control" value="{!billingCity}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                    <div class="pad_top7">
                                        <apex:outputText styleClass="form-text" value="{!billingCity}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                </div>
                                
                             </div>
                             <div class="form-group">
                                 <span>
                                <label class="form control-label col-xs-2 pad_rgt0" for="billing_edit_state">State / Province</label>
                                <div class="col-xs-3">
                                   <apex:selectList id="billing_edit_state" value="{!billingState}" styleClass="state billing form-control" onchange="updateCountry('billingAddress')" multiselect="false" size="1" onblur="searchAF();" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                       <apex:selectoptions value="{!StateOptions}" />
                                   </apex:selectList>
                                   <div class="pad_top7">
                                       <apex:outputText styleClass="form-text" value="{!billingState}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                   </div>
                                </div>
                                </span>
                                <label class="form control-label col-xs-2 pad_rgt0" for="billingZip">Zip / Postal Code</label>
                                <div class="col-xs-3">
                                    <apex:inputText id="billingZip" styleClass="form-control" value="{!billingZipCode}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                    <div class="pad_top7">
                                        <apex:outputText styleClass="form-text" value="{!billingZipCode}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                </div>
                                
                             </div>
                             <div class="form-group">
                             <span>
                                 <label class="form control-label col-xs-2 pad_rgt0" for="billingCountry">Country</label>
                                 <div class="col-xs-3">
                                     <apex:selectList id="billingCountry" value="{!billingCountry}" styleClass="form-control country inputReset" onchange="updateState('billingAddress', 'billing')" multiselect="false" size="1" onblur="" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                         <apex:selectoptions value="{!CountryOptions}" />
                                     </apex:selectList>
                                     <div class="pad_top7">
                                         <apex:outputText styleClass="form-text" value="{!billingCountry}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                    </div>
                                 </div>
                             </span>    
                             </div>
                             </div>           
                                        
                               
                                
                                <!-- ***** Billing Address (end) ***** -->
                                <div class="row hr_row_style col-xs-12">
                                    <hr class="hr_style"></hr>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="custom_space_20" />
                                        <h4 class="text-uppercase title-text pad_lft15">Invoicing</h4>
                                        <div class="hgt15" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form control-label col-xs-2 pad_rgt0" for="invoicing">Requires Invoicing</label>
                                        <div class="col-xs-3 radio pad_top0">                                        
                                            <apex:selectRadio id="invoicePreferance" value="{!SelectinvoiceOptions}" styleClass="radio_btn6" onselect="InvoicePreference(this.value)" onchange="InvoicePreference(this.value)"  rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                <apex:selectoptions value="{!invoiceOptions}" />
                                            </apex:selectRadio>                                            
                                            <apex:selectRadio id="invoicePreferanceLock" value="{!SelectinvoiceOptions}" styleClass="radio_btn6" disabled="true" rendered="{!(isNeedToLock || !hasEditAccess)}">
                                                <apex:selectoptions value="{!invoiceOptions}" />
                                            </apex:selectRadio>                                            
                                        </div>
                                    </div>
                                    <!-- invoiceParentMasterEdit div start -->
                                    <apex:outputPanel id="invoiceParentEditPanel" rendered="{!hasParent}">
                                        <div id="invoiceParentMasterEdit">
                                            <apex:outputPanel rendered="{!NOT(ISNULL(parentAccountId))}">
                                                <div class="form-group" id="invoiceParentAccountEdit">
                                                    <label class="form control-label col-xs-2 pad_rgt0">Invoice Parent Account</label>
                                                    <div class="col-xs-8 radio pad_top0">
                                                        <apex:selectRadio id="invoiceParentRadioEdit" value="{!SelectInvoiceParent}" styleClass="radio_btn6" onchange="InvoiceParentPreference(this.value)" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <!-- <apex:selectoptions value="{!SelectInvoiceParent}" /> -->
                                                            <apex:selectoption itemValue="Yes" itemLabel="Yes" />
                                                            <apex:selectoption itemValue="No" itemLabel="No" />
                                                        </apex:selectRadio>
                                                        <apex:selectRadio id="invoiceParentRadioEditLock" value="{!SelectInvoiceParent}" styleClass="radio_btn6" onchange="InvoiceParentPreference(this.value)" disabled="true" rendered="{!(isNeedToLock || !hasEditAccess)}">
                                                            <!-- <apex:selectoptions value="{!SelectInvoiceParent}" /> -->
                                                            <apex:selectoption itemValue="Yes" itemLabel="Yes" />
                                                            <apex:selectoption itemValue="No" itemLabel="No" />
                                                        </apex:selectRadio>
                                                        <!-- end container div class billing header -->
                                                        <!-- MARCIN - error messages are here-->
                                                        <apex:outputPanel id="showBillingAccountError">
                                                            <apex:repeat value="{!errors}" var="error" id="errorMessage">
                                                                <apex:outputText styleClass="error" value="{!error}" id="errorMessage" />
                                                                <br/>
                                                            </apex:repeat>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div id="invoiceParentYesEdit">
                                                    <div class="form-group mrg_btm0">
                                                        <label class="form control-label col-xs-2 pad_rgt0">Billing</label>
                                                        <div class="col-xs-8 radio pad_top0">
                                                            <apex:selectRadio id="billingParentRadioEdit" value="{!selectBillingParent}" styleClass="radio_btn wid50" onchange="BillingPreference()" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <!-- <apex:selectoptions value="{!SelectBillingParent}" /> -->
                                                                <apex:selectoption itemValue="Centralized" itemLabel="Centralized" />
                                                                <apex:selectoption itemValue="Decentralized" itemLabel="Decentralized" />
                                                            </apex:selectRadio>
                                                             <apex:selectRadio id="billingParentRadioEditLock" value="{!selectBillingParent}" styleClass="radio_btn wid50" disabled="true" rendered="{!(isNeedToLock || !hasEditAccess)}">
                                                                <!-- <apex:selectoptions value="{!SelectBillingParent}" /> -->
                                                                <apex:selectoption itemValue="Centralized" itemLabel="Centralized" />
                                                                <apex:selectoption itemValue="Decentralized" itemLabel="Decentralized" />
                                                            </apex:selectRadio>
                                                        </div>
                                                    </div>
                                                    <label class=" col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8 pad_top0">
                                                        <p class="rw-grey">By choosing centralized, this accounts invoices will be sent to the parent account utilizing the same terms and billing frequency. By choosing decentralized, you are able to direct the invoices to a new address and will bill independent from the parents invoices. The account will still utilize the parents credit line.</p>
                                                    </div>                                                                                                  
                                                    <div class="col-sm-12 mrg_btm10">&nbsp;
                                                    </div>
                                                    <apex:outputPanel id="centralizedBillingEditPanel">
                                                        <div id="centralizedBillingEdit">
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFirstNameEditMode">First Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFirstNameEditMode" styleClass="" value="{!parentBillingContact.FirstName}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_lft0 pad_rgt0" for="parentLastNameEditMode">Last Name</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentLastNameEditMode" styleClass="" value="{!parentBillingContact.LastName}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentEmailEditMode">Email</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentEmailEditMode" styleClass="" value="{!parentBillingContact.Email}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentPhoneEditMode">Phone</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentPhoneEditMode" styleClass="" value="{!parentBillingContact.Phone}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentLegalNameEditMode">Legal Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentLegalNameEditMode" styleClass="" value="{!parentAccount.Legal_Name__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentFedIdEditMode">Federal ID Number</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentFedIdEditMode" styleClass="" value="{!parentAccount.IA_Federal_ID_Nbr__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">  
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFreqEditMode">Billing Frequency</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFreqEditMode" styleClass="" value="{!parentAccount.Billing_Frequency__c}" />
                                                                </div>
                                                               
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentDeliveryByEditMode">Invoice Delivery By</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentDeliveryByEditMode" styleClass="" value="{!parentAccount.Invoice_Delivery_Method__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                 <label class="form control-label col-xs-2 pad_rgt0" for="parentPaymentTermsEditMode">Payment Terms</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentPaymentTermsEditMode" styleClass="" value="{!parentAccount.BPC_Payment_Terms__c}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentCreditLimitEditMode">Approved Credit Limit</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentCreditLimitEditMode" styleClass="" value="{!parentAccount.Credit_Limit__c}" />
                                                                </div>                                                                 
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="emailToCentralizedEdit">Email Application To</label>
                                                                <div class="col-xs-3 pad_top7">
                                                                    <apex:outputText id="emailToCentralizedEdit" value="{!EmailApplicableTo}" />
                                                                </div>                                                                  
                                                            </div>
                                                            <div class="col-sm-12 mrg_btm10">&nbsp;</div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <!-- centralizedBilling div end -->
                                                    <apex:outputPanel id="decentralizedBillingEditPanel">
                                                        <div class="decentralizedBilling" id="decentralizedBillingEdit">
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentLegalName2EditMode">Legal Name</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentLegalName2EditMode" styleClass="" value="{!parentAccount.Legal_Name__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentFedId2EditMode">Federal ID Number</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentFedId2EditMode" styleClass="" value="{!parentAccount.IA_Federal_ID_Nbr__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentFreq2EditMode">Billing Frequency</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentFreq2EditMode" styleClass="" value="{!parentAccount.Billing_Frequency__c}" />
                                                                </div>
                                                                
                                                                <label class="form control-label col-xs-2  pad_lft0 pad_rgt0" for="parentCreditLimit2EditMode">Approved Credit Limit</label>
                                                                <div class="col-xs-3 col-lg-4 pad_top7">
                                                                    <apex:outputText id="parentCreditLimit2EditMode" styleClass="" value="{!parentAccount.Credit_Limit__c}" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="parentPaymentTerms2EditMode">Payment Terms</label>
                                                                <div class="col-xs-3 col-lg-3 pad_top7">
                                                                    <apex:outputText id="parentPaymentTerms2EditMode" styleClass="" value="{!parentAccount.BPC_Payment_Terms__c}" />
                                                                </div>
                                                                <label class="form control-label col-xs-2 pad_rgt0" for="emailToDecentralizedEdit">Email Application To</label>
                                                                <div class="col-xs-3 pad_top7">
                                                                    <apex:outputText id="emailToDecentralizedEdit" value="{!EmailApplicableTo}" />
                                                                </div>  
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <!--decentralizedBilling div end -->
                                                </div>
                                                <!--invoiceParentYes div end -->
                                                <!-- Show noInvoiceId Save and Continue Button when showing this div -->
                                            </apex:outputPanel>
                                        </div>
                                    </apex:outputPanel>
                                    <!-- invoiceParentMasterEdit div end -->
                                   
                                    <!-- begin container div billing fields -->
                                    <div id="billingFieldsId">
                                        <div class="row hr_row_style col-xs-12">
                                            <hr class="hr_style"></hr>
                                        </div>
                                        <!-- ************** Billing Contact Info Header Edit ************* -->
                                        
                                            <div class="row">
                                                <!--<div class="custom_space_20" />-->
                                                <h4 class="text-uppercase title-text pad_lft15">Billing Contact</h4>
                                               <!-- <div class="hgt15" /> -->
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - Contact - Same or Different? ************* -->
                                            <div class="form-group">
                                                <label class="form control-label col-xs-2 pad_rgt0" for="contact">Same as Primary</label>
                                                <div class="col-xs-8 radio pad_top0">
                                                    <apex:selectRadio id="ContactbillingPreferance" value="{!SelectbillingcontactOptions}" styleClass="radio_btn" onselect="ASContactBillingInfo(this.value)" onchange="ASContactBillingInfo(this.value)" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                        <apex:selectoptions value="{!billingcontactOptions}" />
                                                    </apex:selectRadio>
                                                    <apex:selectRadio id="ContactbillingPreferanceLock" value="{!SelectbillingcontactOptions}" styleClass="radio_btn" rendered="{!(isNeedToLock || !hasEditAccess)}" disabled="true">
                                                        <apex:selectoptions value="{!billingcontactOptions}" />
                                                    </apex:selectRadio>
                                                </div>
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - begin div contact same ************* -->
                                            <div class="same_primay" id="same_primay">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <apex:outputPanel id="SameAsPrimaryContactInfo">
                                                            <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                                <b>{!SameAsPrimaryContactInfo}</b>
                                                            </label>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - end div contact same ************* -->
                                            <!-- ************** Billing Contact Info Edit - beign div contact different ************* -->
                                            <div class="different_primay" id="different_primay">                                                                               
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingFirst">First Name</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText styleClass="form-control fFname" id="billingFirst" value="{!billingFirst}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                             <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!billingFirst}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingLast">Last Name</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText styleClass="form-control lLname" id="billingLast" value="{!billingLast}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                             <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!billingLast}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingEmail">Email Address</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText styleClass="form-control billingcredit_email aEmail" id="billingEmail" value="{!billingEmail}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                             <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!billingEmail}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingPhone">Contact Phone #</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText styleClass="form-control mask-phone aPhone" id="billingPhone" value="{!billingPhoneEdit}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!billingPhone}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                        <apex:outputPanel rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <label class="col-xs-4 pad_rgt0" />
                                                            <div class="col-xs-6">
                                                                <p class="rw-grey">You may select up to four roles by holding the Command key on Mac and Control key on Windows.</p>
                                                            </div>
                                                        </apex:outputPanel>                                                              
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingRole">Role</label>
                                                        <div class="col-xs-6">
                                                            <apex:selectList id="billingRole" value="{!selectedBillingRole}" styleClass="form-control" multiselect="true" size="5" style="height:108px !important" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <apex:selectOptions value="{!billingRoles}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!selectedBillingRole}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                    </div>                                            
                                                    <div class="row">
                                                        <div class="form-group col-xs-6">
                                                            <apex:outputPanel rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <label class="form control-label col-xs-4 pad_rgt0" for="billingPhoneExt">Extension</label>
                                                                <div class="col-xs-6">
                                                                    <apex:inputText styleClass="form-control aPhone" id="billingPhoneExt" value="{!billingPhoneExt}" maxlength="4" onkeypress="return NumbersOnly(event);" rendered="{!(!isNeedToLock && hasEditAccess)}" />                                                                
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <div class="form-group col-xs-6 pad_top7">
                                                            <label class="form control-label col-xs-4 pad_rgt0" for="billingTitle">Title</label>
                                                            <div class="col-xs-6">
                                                                <apex:inputText styleClass="form-control titleVal" id="billingTitle" value="{!billingTitle}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                                <div class="pad_top7">
                                                                    <apex:outputText styleClass="form-text" value="{!billingTitle}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                
                                                    
                                                    
                                                </div>                                  
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - end div contact different ************* -->
                                            <!-- ************** Billing Contact Info Edit - Address - Same or Different? ************* -->
                                            <div id="contactAddressRadio" class="form-group dis_none">
                                                <label class="form control-label col-xs-2 pad_rgt0" for="billingContactAddress">Contact Address</label>
                                                <div class="col-xs-8 radio pad_top0">
                                                    <apex:selectRadio id="billingContactAddressPreferance" value="{!SelectContactAddrBillOptions}" styleClass="radio_btn" onselect="ASContactBillingAddress(this.value)" onchange="ASContactBillingAddress(this.value)" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                        <apex:selectoptions value="{!contactAddressBillingOptions}" />
                                                    </apex:selectRadio>
                                                    
                                                    <apex:selectRadio id="billingContactAddressPreferanceLock" value="{!SelectContactAddrBillOptions}" styleClass="radio_btn" disabled="true" rendered="{!(isNeedToLock || !hasEditAccess)}">
                                                        <apex:selectoptions value="{!contactAddressBillingOptions}" />
                                                    </apex:selectRadio> 
                                                        
                                                    
                                                </div>
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - begin div address same ************* -->
                                            <div class="same_conact" id="same_contact">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                            <b>{!SameAsAccountAddress}</b>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="same_conact" id="same_billing_contact">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0"></label>
                                                    <div class="col-xs-8">
                                                        <label class="clr_blk form control-label txt_left pad_top0 pad_btm10">
                                                            <b>{!SameAsBillingAddress}</b>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- ************** Billing Contact Info Edit - end div address same ************* -->
                                            <!-- ************** Billing Contact Info Edit - beign div address different ************* -->
                                            <div class="different_contact" id="different_contact">
                                                <div class="form-group">
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingContactStreet">Street Address</label>
                                                    <div class="col-xs-3">                                                    
                                                        <apex:inputText id="billingContactStreet" styleClass="form-control crStreet" value="{!billingStreet}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                        <div class="pad_top7">
                                                            <apex:outputText styleClass="form-text" value="{!billingStreet}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                        </div>
                                                    </div>
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingContactCity">City</label>
                                                    <div class="col-xs-3">
                                                        <apex:inputText id="billingContactCity" styleClass="form-control crCity" value="{!mailingCity}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                        <div class="pad_top7">
                                                            <apex:outputText styleClass="form-text" value="{!mailingCity}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                <span>
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingContactState">State / Province</label>
                                                    <div class="col-xs-3">
                                                        <!--<apex:inputText id="billingContactState" styleClass="form-control" value="{!mailingState}" /> -->
                                                        <apex:selectList id="billingContactState" value="{!mailingState}" onchange="updateCountry('different_contact')" styleClass="state billingContactState form-control" multiselect="false" size="1" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <apex:selectoptions value="{!contactStateOptions}" />
                                                        </apex:selectList>
                                                        <div class="pad_top7">
                                                            <apex:outputText styleClass="form-text" value="{!mailingState}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                        </div>    
                                                    </div>
                                                </span>    
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingContactZip">Zip / Postal Code</label>
                                                    <div class="col-xs-3">
                                                        <apex:inputText id="billingContactZip" styleClass="form-control crZip" value="{!mailingzipCode}" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                        <div class="pad_top7">
                                                            <apex:outputText styleClass="form-text" value="{!billingCountry}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                <span>
                                                    <label class="form control-label col-xs-2 pad_rgt0" for="billingCountry">Country</label>
                                                    <div class="col-xs-3">
                                                        <apex:selectList id="country" value="{!mailingCountry}" styleClass="form-control country inputReset"  onchange="updateState('different_contact', 'billingContactState')" multiselect="false" size="1" onblur="" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <apex:selectoptions value="{!BillingCountryOptions}" />
                                                        </apex:selectList>
                                                        <div class="pad_top7">
                                                             <apex:outputText styleClass="form-text pad_top7" value="{!mailingCountry}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                        </div>
                                                    </div>
                                                </span>    
                                                </div>
                                            </div>
                                            <!-- Added this div so I can hide the payment terms for child accounts
                            so we can reuse the contact portion of the form-->
                                            <div id="paymentTermsContainer">
                                                <!-- ************** Contact Info Edit - end div address different ************* -->
                                                <div class="row summary_section_3">
                                                    <br/>
                                                    <br/>
                                                </div>
                                                <!-- ************** Payment Terms Header ************* -->
                                                <div class="row hr_row_style col-xs-12">
                                                    <hr class="hr_style"></hr>
                                                </div>
                                                <div class="row">
                                                    <div class="custom_space_20" />
                                                    <h4 class="text-uppercase title-text">Payment Terms &amp; Invoice Preferences</h4>
                                                    <div class="hgt15" />
                                                </div>
                                                <!-- ************** Payment Terms Info ************* -->
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                        <apex:outputPanel rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <label class="col-xs-4 pad_rgt0" />
                                                            <div class="col-xs-6">
                                                                <p class="rw-grey"><br/><br/><br/><br/></p>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="legalName">Legal Name</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText id="legalName" styleClass="form-control" value="{!legalName}" size="1" rendered="{!(!isNeedToLock && hasEditAccess)}"/>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text pad_top7" value="{!legalName}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <apex:outputPanel rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <label class="col-xs-4 pad_rgt0" />
                                                            <div class="col-xs-6">
                                                                <p class="rw-grey">Any term over 30 days will result in additional cost per transaction. Contact your ROM if account requires terms longer than 60 days.</p>
                                                            </div>
                                                        </apex:outputPanel>    
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="terms">Payment Terms</label>
                                                        <div class="col-xs-6" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                            <apex:selectList id="terms" styleClass="form-control" value="{!selectpaymentTerms}" size="1" required="true" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <apex:selectOptions value="{!paymentTerms}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text pad_top7" value="{!displayPaymentTerms}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>    
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingFrequency">Billing Frequency</label>
                                                        <div class="col-xs-6">
                                                            <apex:selectList id="billingFrequency" styleClass="form-control" value="{!selectBillingFrequency}" size="1" required="true" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <apex:selectOptions value="{!billingFrequency}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text pad_top7" value="{!selectBillingFrequency}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                       
                                                    </div>
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="billingContactZip">Federal ID Number</label>
                                                        <div class="col-xs-6">
                                                            <apex:inputText id="federalIdNumber" styleClass="form-control" value="{!federalIdNumber}" rendered="{!(!isNeedToLock && hasEditAccess)}" maxlength="9" onkeypress="return isNumber(event)"/>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text pad_top7" value="{!federalIdNumber}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>    
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="row">
                                                    <div class="form-group col-xs-6">
                                                         <label class="form control-label col-xs-4 pad_rgt0" for="deliveryBy">Invoice Delivery By</label>
                                                        <div class="col-xs-6">
                                                            <apex:selectList id="deliveryBy" styleClass="form-control" value="{!selectinvoiceDelivery}" size="1" required="true" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <apex:selectOptions value="{!invoiceDeliveryMethod}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text pad_top7" value="{!displayInvoiceDelivery}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                        
                                                    </div>
                                                      <div class="form-group col-xs-6">
                                                          
                                                        
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="creditLimit">Requested Credit Limit</label>
                                                        <div class="col-xs-6">
                                                            <!--<apex:input id="reqCurLmt" type="number" styleClass="form-control" value="{!requestedCreditLimit}" />-->
                                                            <apex:selectList id="reqCurLmt" value="{!SelectiReqCreditLimitOptions}" styleClass="form-control" multiselect="false" size="1" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                <apex:selectOptions value="{!ReqCreditLimitOptions}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!SelectiReqCreditLimitOptions}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>     
                                                        </div>
                                                    </div>
                                                </div>

                                                
                                                <div class="row">
                                                    
                                                    <div class="form-group col-xs-6">
                                                        <label class="col-xs-4 pad_rgt0" />
                                                        <div class="col-xs-6">
                                                            <p class="rw-grey">You may select up to four attributes by holding the Command key on Mac and Control key on Windows.</p>
                                                        </div>
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="invoiceAttrEdit">Invoice Attributes Required</label>
                                                        <div class="col-xs-6">
                                                            <apex:selectList id="invoiceAttrEdit" styleClass="form-control invoiceAttributeId" value="{!selectInvoiceAttributes}" multiselect="true" size="5" style="height:108px !important" rendered="{!hasEditAccess}">
                                                                <apex:selectOptions value="{!invoiceAttributesRequired}" />
                                                            </apex:selectList>
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="pad_top7" id="invoiceAttrEditLock" value="{!selectInvoiceAttributes}" rendered="{!!hasEditAccess}" />
                                                            </div>
                                                        </div>    
                                                        
                                                        
                                                    </div>
                                                </div>
                                                 
                                    
                                    
                                                <div class="row">
                                                    
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="emailTo">Email Application To</label>
                                                        <div class="col-xs-6">
                                                            <apex:input id="emailTo" type="email" styleClass="form-control clearInput getbilling_email" value="{!EmailApplicableTo}" html-placeholder="example@Company.com" rendered="{!(!isNeedToLock && hasEditAccess)}" />
                                                            <div class="pad_top7">
                                                                <apex:outputText styleClass="form-text" value="{!EmailApplicableTo}" rendered="{!(isNeedToLock || !hasEditAccess)}" />
                                                            </div>      
                                                        </div>
                                                    </div>
                                                </div>
                                                 <div class="row">
                                                    
                                                    <div class="form-group col-xs-6">
                                                        <label class="form control-label col-xs-4 pad_rgt0" for="standardApp">RWBAA Standard Application</label>
                                                        <div class="col-xs-6 radio pad_top0">
                                                            <apex:selectRadio id="standardApp" value="{!selectStandardApplication}" styleClass="radio_btn6" onchange="attachCreditDoc(this.value)" rendered="{!(!isNeedToLock && hasEditAccess)}">
                                                                  <apex:selectOptions value="{!invoiceOptions}"/>
                                                            </apex:selectRadio>                                                     
                                                            <apex:selectRadio id="standardAppLock" value="{!selectStandardApplication}" styleClass="radio_btn6" rendered="{!(isNeedToLock || !hasEditAccess)}" disabled="true">
                                                                  <apex:selectOptions value="{!invoiceOptions}"/>
                                                            </apex:selectRadio>                                                            
                                                        </div>
                                                    </div>
                                                    </div>
                                                   
                                                    <div id="creditDocAttach" class="row dis_none">
                                                        <div class="form-group col-xs-6">
                                                            <label class="form control-label col-xs-4 pad_rgt0" >&nbsp;</label>
                                                            <div class="col-xs-6">
                                                                <a style="display:none;" class="btn btn-danger btn-xl flt_lft" id="clear-file" onClick="clearFileAttach();">X</a>
                                                                <span id="attachLabel2" class="btn btn-danger btn-outline " onClick="nonStandardAttachOptions(); attachmentModal('fa fa-paperclip', 'ATTACH FILE', 'attachmentFlag();', 'clearFileAttach();'); return false;">Attach Document</span>
                                                            </div>
                                                        </div>    
                                                    </div>
                                                    
                                                       
                                                        
                                                    
                                                </div>
                                                
                                                <div class="row summary_section_3">
                                                    <br/>
                                                </div>
                                            </div>
                                                                             
                                    
                                </div>
                                
                                <div class="form-group" id="sendCreditAppDiv">                                                
                                        <div class="col-sm-2">&nbsp;</div>
                                        <apex:outputPanel rendered="{!(!$Setup.RWfB_Community__c.Disable_Credit_Applications__c) && (!isNeedToLock)}">
                                            <div class="col-sm-4 mrg_top20 pad_rgt0">
                                                <a class="btn btn-danger btn-outline flt_lft btn-xl wid100" id="credit-info-validate-save">Send Credit Application</a>
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!($Setup.RWfB_Community__c.Disable_Credit_Applications__c) || (isNeedToLock)}">
                                            <div class="col-sm-4 mrg_top20 pad_rgt0">
                                                <a class="btn btn-danger btn-outline disabled flt_lft btn-xl wid100" disabled="true">Send Credit Application</a>
                                            </div>
                                        </apex:outputPanel> 
                                       
                                        <div class="col-sm-6 mrg_top20 mrg_btm20" align="left">&nbsp;</div>
                                                                 
                                </div>
                                
                                    
                                <div class="row summary_section_3">
                                    <br/>
                                    <br/>
                                </div>   
                                
                               
                                <script type="text/javascript">
                                var standardCreditApp = true;
                                var creditAppDocAttached = false;
                                var sendCredit = false;
                                var creditAppDocInList = false;
                                
                                 function attachmentFlag(){
                                     creditAppDocAttached = true;
                                 
                                 }
                                
                                
                                 function clearFileAttach() {
                                    $('span#attachLabel').text("Choose File to Attach");
                                    $('span#attachLabel2').text("Attach Document");
                                    $('#clear-file').hide();
                                    document.getElementById("attachErrorMsg").innerHTML = "&nbsp;";
                                    $("#attachmentFile").val('');                                    
                                
                                }
                                
                                
                                function nonStandardAttachOptions(){
                                    restrictPicklistOPtions();
                                    $('#readOnlyCreditAppCheckbox').removeClass("dis_none");
                                    $('#clickableCreditAppCheckbox').addClass("dis_none");
                                    $('#attachTypeOptionsNonStandard').removeClass("dis_none");
                                    $('#attachTypeOptions').addClass("dis_none");
                                    document.getElementById('AccountSummary:attachment:creditApplicationDoc').checked = true;
                                }
                                
                                    
                                function ResendCreditApp(){
                                    var creditAppDocAttached = false;
                                    var standardCreditApp = document.getElementById('AccountSummary:billingForm:standardAppResendModal:0').checked;
                                    for (var i = 0; i < attachArray.length; i++) {
                                        if (attachArray[i] == "true"){
                                            creditAppDocAttached = true;
                                        }
                                    }
                                   
                                    if ((creditAppDocAttached && !standardCreditApp) || standardCreditApp) {
                                        if($("[id$=billingForm]").valid()){
                                            SaveCreditInfo(true);
                                        }
                                    } else {
                                        specialModal('fa fa-exclamation-circle', 'APPLICATION NOT SENT', 'You cannot send a non-RWBAA Credit Application until you identify a RWfB Attachment as the Document for Credit Application.', '', 'OKAY');
                                    }                                
                                }            
                                
                                function sendCreditApp(){
                                    if ((creditAppDocAttached && !standardCreditApp) || standardCreditApp) {                                   
                                        if ($("[id$=billingForm]").valid()) {
                                            SaveCreditInfo(true);
                                            if ($("[name='AccountSummary:billingForm:invoicePreferance']").val() == "No") {
                                                $("#billingFieldsId").hide();
                                            }
                                        }
                                    } else {
                                        specialModal('fa fa-exclamation-circle', 'APPLICATION NOT SENT', 'You cannot send a non-RWBAA Credit Application until you identify a RWfB Attachment as the Document for Credit Application.', '', 'OKAY');
                                    }
                                }
                                
                                function checkForCreditAppDoc(){
                                    for (var i = 0; i < attachArray.length; i++) {
                                        if (attachArray[i] == "true"){
                                            creditAppDocAttached = true;
                                            creditAppDocInList = true;                                             
                                            document.getElementById('AccountSummary:attachment:creditApplicationDoc').checked = true;                                           
                                        } else {
                                            creditAppDocAttached = false;
                                            creditAppDocInList = false;                                            
                                            document.getElementById('AccountSummary:attachment:creditApplicationDoc').checked = false;
                                        }

                                    }
                                    if (creditAppDocAttached == true){
                                        $('span#attachLabel2').text(attachmentName);
                                        $('span#attachLabel2').addClass("disabled");
                                        $("#attachLabel2").prop('onclick',null);
                                    
                                    }
                                    
                                }
                                
                                
                                
                                
                                $('#continue-billing-validate-form').on('click', function() {
                                    if ($("[id$=billingForm]").validate().element("[id='AccountSummary:billingForm:emailTo']")) {
                                        SaveCreditInfo(false);
                                        
                                        if ($("[name='AccountSummary:billingForm:invoicePreferance']").val() == "No") {
                                            $("#billingFieldsId").hide();
                                        }
                                    }
                                });
                                
                                
                                
                                
                                
                                //BW - added validation to below function for send credit button to make sure there is a document for credit app attachment when RWBAA standard credit app field is set to false.                                 
                                $('#credit-info-validate-save').on('click', function() {
                                    sendingCreditApp = true;                                    
                                    if($("[id$=billingForm]").valid()){                                                                        
                                        standardCreditApp = document.getElementById('AccountSummary:billingForm:standardApp:0').checked;
                                         console.log("creditAppDocAttached: "+creditAppDocAttached);                                    
                                        if (creditAppDocAttached == true && creditAppDocInList == false){
                                            uploadAttachValidate();
                                            sendCredit = true;
                                        } else if (creditAppDocAttached == true && creditAppDocInList == true){
                                            sendCreditApp(); 
                                        } else {
                                            sendCreditApp();
                                        }                          
                                   } 
                                });

                                $(document).ready(function() {
                                    console.log("Invoice options: {!SelectinvoiceOptions}");
                                    InvoicePreference('{!SelectinvoiceOptions}');

                                    console.log("{!SelectInvoiceParent}");
                                    InvoiceParentPreference('{!SelectInvoiceParent}');

                                    console.log("{!SelectbillingcontactOptions}");
                                    ASContactBillingInfo("{!SelectbillingcontactOptions}");

                                    console.log("{!SelectContactAddrBillOptions}");
                                    ASContactBillingAddress("{!SelectContactAddrBillOptions}");

                                    var hasParent = {!hasParent};
                                    if (hasParent == false) {
                                        $('#paymentTermsContainer').show();
                                    }
                                });

                            


                                function editASBilling() {
                                checkForCreditAppDoc(); 
                                console.log('*************************{!selectStandardApplication}');    
                                var billingAddressOption = "{!selectBillingAddressOption}";
                                    if (billingAddressOption == 'Yes') {
                                        
                                        $("#SameAsAccountBilling").css({
                                            'display': 'block'
                                        });
                                        
                                        $("#billingAddress").css({
                                            'display': 'none'
                                        });
                                    } else {
                                        
                                        $("#billingAddress").css({
                                            'display': 'block'
                                        });
                                        $("#SameAsAccountBilling").css({
                                            'display': 'none'
                                        });
                                    }
                                                    
                                    $('#billingDetails').hide();
                                    $('#billingEdit').show();
                                    $('#billingDetailsHeaderView').hide();
                                    $('#billingDetailsHeaderEdit').show();
                                    //InvoicePreference();
                                    //ASContactBillingInfo();
                                    if ('{!selectStandardApplication}' == 'No'){
                                        $('#creditDocAttach').show();
                                    }
                                    editFlag = true;
                                }
                                
                                                                
                                function InvoicePreference(value) {
                                    var $invoicePreferanceVal = value || $('[name="AccountSummary:billingForm:invoicePreferance"]:checked').val();
                                    $invoiceParentValue = $('input[name="AccountSummary:billingForm:invoiceParentRadioEdit"]:checked').val();
                                    
                                    if ($invoicePreferanceVal == 'No') {
                                        $('#invoiceParentMasterEdit, #invoiceParentMaster, #billingFieldsId, #billingFields, #sendCreditAppDiv, #paymentTermsDiv, #paymentTermsContainer').hide();
                                    } else {
                                        $('#invoiceParentMasterEdit, #invoiceParentMaster, #billingFields, #billingFieldsId, #sendCreditAppDiv, #paymentTermsDiv, #paymentTermsContainer').show();
                                        if ({!(!isNeedToLock && hasEditAccess)} && $invoiceParentValue != 'Yes')
                                            document.getElementById("AccountSummary:billingForm:legalName").focus(); 
                                        InvoiceParentPreference();
                                    }
                                }

                                function InvoiceParentPreference(value) {
                                    $invoiceParentValue = value || $('input[name="AccountSummary:billingForm:invoiceParentRadioEdit"]:checked').val();
                                    if ($invoiceParentValue == 'No') {
                                        $("#paymentTermsContainer, #billingFieldsId").show();
                                        $("#invoiceParentYesEdit, #send-credit-btn").hide();       

                                        ASContactBillingInfo();
                                        ASContactBillingAddress();
                                    } else if ($invoiceParentValue == 'Yes') {
                                        $("#invoiceParentYesEdit").show();
                                        BillingPreference();
                                    } 
                                }

                                function BillingPreference(val) {
                                    $billingParentValue = val || $('input[name="AccountSummary:billingForm:billingParentRadioEdit"]:checked').val();
                                    if ($billingParentValue == 'Centralized') {
                                        $("#send-credit-btn, #centralizedBillingEdit").show();
                                        $("#billingFieldsId, #decentralizedBillingEdit, #billingFields").hide();

                                    } else if ($billingParentValue == 'Decentralized') {
                                        $("#billingFieldsId, #decentralizedBillingEdit").show();
                                        $("#send-credit-btn, #centralizedBillingEdit, #paymentTermsDiv, #paymentTermsContainer").hide();

                                        ASContactBillingInfo();
                                        ASContactBillingAddress();
                                    }
                                }

                                function ASContactBillingInfo(val) {
                                    var $CBIval = val || $('input[name="AccountSummary:billingForm:ContactbillingPreferance"]:checked').val();
                                    if ($CBIval == 'Different') {
                                        $('#contactAddressRadio, #different_primay, #different_primary_display').show();
                                        $('#same_primay, #same_primary_display').hide();
                                        if ({!(!isNeedToLock && hasEditAccess)})
                                            document.getElementById("AccountSummary:billingForm:billingFirst").focus(); 

                                    } else {
                                        $('#same_primay, #contactAddressRadio, #same_primary_display').show();
                                        $('#different_primay, #different_primary_display').hide();
                                        
                                    }
                                    
                                }


                                function ASContactBillingAddress(val) {
                                    var $BCAPval = val || $('input[name="AccountSummary:billingForm:billingContactAddressPreferance"]:checked').val();
                                    if ($BCAPval == 'Different') {
                                        $('#different_contact, #different_contact_display').show();
                                        $('#same_contact, #same_billing_contact, #same_contact_display, #same_billing_contact_display').hide();
                                        document.getElementById("AccountSummary:billingForm:billingContactStreet").focus(); 

                                    } else if($BCAPval == 'Same as Billing') {
                                         $('#same_billing_contact, #same_billing_contact_display').show();
                                        $('#different_contact, #same_contact, #different_contact_display, #same_contact_display').hide();
                                    } else {                        
                                        $('#same_contact, #same_contact_display').show();
                                        $('#different_contact, #same_billing_contact, #different_contact_display, #same_billing_contact_display').hide();

                                    }
                                }
                                
                                function resetAttachmentSessionVar() {
                                    sessionStorage.removeItem('disableAttachment');
                                }
                                
                                function isNumber(evt) {
                                    evt = (evt) ? evt : window.event;
                                    var charCode = (evt.which) ? evt.which : evt.keyCode;
                                    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                                        return false;
                                    }
                                    return true;
                                }
                                
                                
                                </script>
                               </apex:outputPanel>
                            </div>   
                        </apex:actionRegion>
                    </div>
</apex:form>
                    </apex:outputPanel>
                    <!-- Billing Details End -->
                    
                    <div id="AccountRelatedList1" class="accordion child-account">
                        <div class="AccountRelatedList2">
                            <div class="row">
                                <div class="summary_section_2 col-sm-12 mini_text_padder pheader">
                                    <div class="col-sm-5">
                                        <span class="text-uppercase sub-header">Accounts</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel">
                    <div class="col-xs-12 pad_rgt5 mrg_btm10 mrg_top20">
                        <h4 class="title-text text-uppercase col-sm-4 pad_lft15">List Of Related Accounts</h4>
                        <apex:outputpanel rendered="{!hasEditAccess && isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt disabled" aria-hidden="true" >Add More</span> <!-- onClick="resetAttachmentSessionVar(); window.location='RWS_Account_CreationV2?tab=account&ParentId={!accountId}'; return false;" -->
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt disabled" aria-hidden="true">Add More</span>
                        </apex:outputpanel>
                    </div>
                    <div class="pad_lft15 pad_rgt15">
                        <apex:pageBlock id="accLst">
                            <apex:form >
                                <!--<apex:actionFunction name="deleteChildAccount" action="{!deleteChildAccount}" reRender="AccListView">
                                    <apex:param name="firstParam" assignTo="{!deleteChildAccountId}" value="{!}" />
                                </apex:actionFunction> -->
                                <apex:pageBlockTable id="AccListView" columnClasses="table-striped" styleClass="col-sm-12 display dataTable no-footer pad_top10 pad_btm10 pad_lft10" value="{!childAccounts}" var="ac">
                                    <apex:column styleClass="pad_top10 pad_btm10 pad_lft10 rw-red" headerValue="Name">
                                        <apex:outputLink value="AccountSummary?tab=account&id={!ac.ac.Id}&ParentId={!accountId}" >{!ac.ac.Name}</apex:outputLink>
                                    </apex:column>
                                    <apex:column styleClass="pad_top10 pad_btm10 pad_lft10 black" headerValue="Location" >
                                    {!ac.ac.IA_Physical_Location_City__c}, {!ac.ac.IA_Physical_Location_State_Province__c } 
                                    </apex:column>
                                    <apex:column styleClass="pad_top10 pad_btm10 pad_lft10 black" headerValue="Active" value="{!ac.ac.Active__c}" />
                                    <apex:column styleClass="pad_top10 pad_btm10 pad_lft10 black" headerValue="Owning Store" value="{!ac.ac.Owning_Store__c}"/>
                                         
                                    <!--<apex:column styleClass="ct">
                                        <a id="AccountView" href="RWS_Account_CreationV2?tab=account&id={!ac.ac.Id}&ParentId={!accountId}" class="cursor"><span class="btn btn-danger btn-outline px-1 mx-1">Edit</span></a>
                                    </apex:column>
                                    <apex:column styleClass="ct">
                                        <a id="AccountDelete" onclick="if(confirm('Do You want to delete Account (Account Name : {!ac.ac.Name}) ? '))deleteChildAccount('{!ac.ac.Id}'); return false;"><span class="btn btn-danger btn-outline px-1 mx-1">Delete</span></a>
                                    </apex:column>-->
                                </apex:pageBlockTable>
                            </apex:form>
                        </apex:pageBlock>
                    </div>
                    <div class="col-sm-12 mrg_top10">&nbsp;</div>
                    </div>
                    
                    <div class="row accordion program">
                        <div class="summary_section_2 col-sm-12 mini_text_padder pheader">
                            <div class="col-sm-5">
                                <span class="text-uppercase sub-header">Programs</span>
                            </div>
                        </div>
                    </div>
                    <div class="panel">
                    <div class="col-xs-12  pad_rgt5 mrg_btm10 mrg_top20">
                        <h4 class="title-text text-uppercase col-sm-4 pad_lft15">List Of Account Related Programs</h4>
                        <apex:outputpanel rendered="{!hasEditAccess && isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt" onClick="specialModal(null, 'PROGRAMS', 'There are two ways to add programs to your account. You can either create a new program from scratch or select an existing template.', 'window.open(\'RWS_NewProgramSetup?tab=program&AccountId={!accountId}\'\, \'_self\');', 'CREATE NEW PROGRAM', 'window.open(\'RWS_ProgramsList?tab=program&id={!accountId}\'\, \'_self\');', 'ASSIGN EXISTING PROGRAM'); resetSessVar(); ">Add More</span>
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt disabled">Add More</span>
                        </apex:outputpanel>
                    </div>
                    <div class="pad_lft15 pad_rgt15">
                        <apex:pageBlock id="pgmLst">
                            <table id="ProgramListView" class="col-sm-12 display dataTable no-footer pad_top10 pad_btm10 pad_lft10" width="100%">
                                  <thead>
                                      <tr>
                                          <th><span class="glyphicon glyphicon-sort"></span> Name</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Type</th>
                                          <th>Active</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Effective Date</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Expiration Date</th> 
                                          <th><span class="glyphicon glyphicon-sort"></span> Notes</th>                                         
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <apex:repeat value="{!ListofAccountPrograms}" var="Pgm">
                                          <tr>
                                              <td> <a id="ProgramViewEdit" class="view-contact" href="ProgramSummary?tab=program&proid={!Pgm.Id}">
                                                {!Pgm.Name}
                                              </a></td>
                                              <td class="programType">{!Pgm.Type__c}</td>
                                              <td><apex:form > <apex:inputCheckbox value="{!Pgm.Active__c}" disabled="true" styleClass="default-cursor"/></apex:form></td>
                                              <td><apex:outputText value="{0,date,M/d/yyyy}"> <apex:param value="{!Pgm.Activation_Date__c}" /> </apex:outputText></td>
                                              <td><apex:outputText value="{0,date,M/d/yyyy}"> <apex:param value="{!Pgm.Expiration_Date__c}" /> </apex:outputText></td>
                                              <td>{!Pgm.Program_Notes_Trimmed__c}</td>
                                          </tr>
                                      </apex:repeat>
                                  </tbody>
                              </table>                      
                        
                        </apex:pageBlock>
                    </div>
                    <div class="col-sm-12 mrg_top15">&nbsp;</div>
                    </div>                    
                    
                    <div class="row accordion attachment">
                        <div class="summary_section_2 col-sm-12 mini_text_padder pheader">
                            <div class="col-sm-5">
                                <span class="text-uppercase sub-header">Attachments</span>
                            </div>
                        </div>
                    </div>
                    <div class="panel">
                    <div class="col-xs-12  pad_rgt5 mrg_btm10 mrg_top20">
                        <h4 class="title-text text-uppercase col-sm-4 pad_lft15">List Of Related Attachments</h4>
                        <apex:outputpanel rendered="{!hasEditAccess && isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt" onClick="standardAttachOptions(); attachmentModal('fa fa-paperclip', 'ATTACH FILE', 'uploadAttachValidate();', 'clearAttachErrorMsg();'); return false;">Add More</span>
                        </apex:outputpanel>
                        <apex:outputpanel rendered="{!!hasEditAccess || !isFullAccessUser}" layout="none">
                            <span class="btn btn-danger btn-outline flt_rgt disabled">Add More</span>
                        </apex:outputpanel>
                    </div>
                    
                    <apex:outputPanel id="attachList">
                    <script> 
                         var attachArray2 = [];
                         var attachArray = []; 
                         var attachmentName;
                         var creditDocAttType;
                    </script> 
                    <apex:repeat value="{!atttachmentList}" var="Attach"> 
                        <script>
                            attachArray2.push('{!Attach}');                         
                            console.log('from repeat: {!Attach.isCreditAppDoc}');
                            attachArray.push('{!Attach.isCreditAppDoc}');
                            if('{!Attach.isCreditAppDoc}' == 'true'){
                                attachmentName = '{!Attach.Name}';
                                creditDocAttType = '{!Attach.attType}';    
                            }                                     
                        </script> 
                    </apex:repeat> 
                    <script>
                        $(document).ready(function() {
                            console.log("this: "+ attachArray2);
                            var selectStandardApp = "{!selectStandardApplication}";
                            checkForCreditAppDoc();
                            if(selectStandardApp == "Yes" ){
                                $('#creditDocAttach').addClass("dis_none");
                            } else {
                                $('#creditDocAttach').removeClass("dis_none");
                            }
                        });
                    </script> 
                    <div class="pad_lft15 pad_rgt15">
                        <apex:pageBlock id="attachLst">
                         

                           <apex:outputPanel id="aList">
                            <apex:form >
                            <apex:actionRegion >
                                <apex:actionFunction name="RemoveFile"  action="{!deleteRWFB}" onComplete="reintializeTable()" reRender="attachList" status="loadSplashScreen" >
                                      <apex:param name="attachId" id="attachId" value=""/>
                                </apex:actionFunction>
                              
                              
                              <table id="AttachmentListView" class="col-sm-12 display dataTable no-footer pad_top10 pad_btm10 pad_lft10" width="100%">
                                  <thead>
                                      <tr>
                                          <th><span class="glyphicon glyphicon-sort"></span> Name</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Type</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Created Date</th>
                                          <th><span class="glyphicon glyphicon-sort"></span> Credit Application</th>
                                          <th></th>                                          
                                          <th></th>
                                          <th class="dis_none"></th>                                          
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <apex:repeat value="{!atttachmentList}" var="Attach">
                                          <tr>
                                              <td>{!Attach.Name}</td>
                                              <td>{!Attach.attType}</td>
                                              <td><apex:outputText value="{0,date,M/d/yyyy}"> <apex:param value="{!Attach.CreatedDate}" /> </apex:outputText></td>
                                              <td><apex:inputCheckbox value="{!Attach.isCreditAppDoc}" disabled="true"/></td>
                                              <td><apex:outputLink value="/servlet/servlet.FileDownload?file={!Attach.att.Id}" target="_blank" styleClass="view-contact">Download</apex:outputLink></td>
                                              <td>
                                                  <apex:outputPanel rendered="{!hasEditAccess && !Attach.isCreditAppDoc}">
                                                      <a id="deleteAttachmentId" class="view-contact" onclick="RemoveFile('{!Attach.rwfbId}'); ">Remove</a>
                                                  </apex:outputPanel>
                                                  <apex:outputPanel rendered="{!!hasEditAccess}">
                                                  </apex:outputPanel>
                                              </td>
                                             
                                              <td class="dis_none">{!Attach.CreatedDate}</td>
                                          </tr>
                                      </apex:repeat>
                                  </tbody>
                              </table>                      
                              
                           
                            </apex:actionRegion>
                            </apex:form>
                            </apex:outputPanel>
                        </apex:pageBlock>
                    </div>
                    </apex:outputPanel>
                    <div class="col-sm-12 mrg_top15">&nbsp;</div>
                    </div>
                    
                    
                    
                </div>              
                
            </div>
            
            <script>
            
            function standardAttachOptions(){
                restrictPicklistOPtions();
                $('#readOnlyCreditAppCheckbox').addClass("dis_none");
                $('#clickableCreditAppCheckbox').removeClass("dis_none");
                $('#attachTypeOptionsNonStandard').addClass("dis_none");
                $('#attachTypeOptions').removeClass("dis_none");
                document.getElementById('AccountSummary:attachment:creditApplicationDoc').checked = false;   
                                      
            }
           
            function reintializeTable(){
                $('#AttachmentListView').DataTable( {
                    PageLength: 10,
                    bFilter: false,
                    order: [ 6, "desc" ]
                } );   
                                
            }
            
            
            </script>
            <c:RWS_Modals />
            <div class="modal inmodal" id="sendApplication" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <p class="modal-title title_red">APPLICATION SENT</p>
                        </div>
                        <div class="modal-body pad_top_btm40">
                            <p class="sub_tilte_clr txt_center mrg_btm0">Thank you, your application has
                                <br/> been submitted and can expect
                                <br/> a response within 4 hours</p>
                        </div>
                        <div class="modal-footer">
                            <section class="col-sm-12">
                                <ul class="list-inline col-sm-12 mrg_all0 padd_all0 ">
                                    <li class="col-sm-12 popup_close"><a class="cancel1 cursor" data-dismiss="modal" onclick="HideCreditApplicationInfo();">OKAY</a></li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            <!--</apex:form>-->
            <c:RWS_Footer />
        </div>
        
        
        
         <div id="resendCreditModal" class="modal fade inmodal">
                <div class="modal-dialog">
                    <div class="modal-content modal-bg">
                        <div class="modal-header header-border txt_center black">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h4 class="modal-title modal-header-text"><i id="resendModalIcon"></i> <span id="resendModalTitle">Confirmation</span></h4>
                        </div>
                        <div class="pad_top_btm40 modal-bg">
                            <p id="resendModalMsg" class="sub_tilte_clr txt_center mrg_btm0 modal-body-text">
                            <apex:form id="resendModal">
                            <label class="form control-label col-xs-4 pad_rgt0" for="emailTo">Email Application To</label>
                            <apex:input id="emailTo" type="email" styleClass="form-control clearInput getbilling_email" value="{!EmailApplicableTo}" html-placeholder="example@Company.com" />
                            </apex:form>
                            </p>
                        </div>
                        <div class="modal-footer footer-border">
                            <ul class="list-inline col-sm-12 mrg_all0 padd_all0 ">
                                <li class="col-sm-12 popup_close">
                                    <button id="btnOneName" type="button" class="btn btn-danger ">Resend Credit Application</button>
                                    <button id="btnTwoName" type="button" class="btn btn-danger btn-outline">Cancel</button>                                    
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <apex:outputPanel id="modalAttach">
            <div id="attachModal" class="modal fade inmodal">
                <apex:form id="attachment">
                    <apex:actionFunction name="refreshList" oncomplete="reintializeTable()" reRender="attachList" immediate="true"/>
               <apex:actionRegion >
                    <apex:actionFunction name="AttachFile"  oncomplete="clearUploadSelection(); clearAttachErrorMsg();" reRender="attachList,attachmentModalPanel, modalAttach"  status="loadSplashScreen" immediate="true"/>
                </apex:actionRegion>
                <apex:outputPanel id="attachmentModalPanel">
                <div class="modal-dialog">
                    <div class="modal-content modal-bg">
                        <div class="modal-header header-border txt_center black">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="clearAttachErrorMsg();">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h4 class="modal-title modal-header-text"><i id="attachModalIcon"></i> <span id="attachModalTitle">Title</span></h4>
                        </div>
                        <div class="pad_top40 pad_btm30 modal-bg">
                            <p id="attachModalMsg" class="sub_tilte_clr txt_center mrg_btm0 modal-body-text"> 
                                <apex:actionRegion > 
                                    <div class="col-lg-12">
                                        <div class="col-lg-1">
                                        </div>
                                        <div class="col-lg-5">                             
                                            <label for="creditApplicationDoc" class="form control-label pad_rgt0 flt_rgt pad_top7">Document For Credit Application</label>
                                        </div>
                                        <div class="col-lg-6 ">
                                            <div id="readOnlyCreditAppCheckbox" class="dis_none">
                                                <apex:inputCheckbox id="creditApplicationDocReadOnly" value="{!selectCreditApplicationDoc}" styleClass="enlargeTextbox" selected="true" disabled="true" />
                                            </div>
                                            <div id="clickableCreditAppCheckbox">
                                                <apex:inputCheckbox id="creditApplicationDoc" value="{!selectCreditApplicationDoc}" styleClass="enlargeTextbox" onchange="updateAttachmentTypePicklist(this);" />
                                            </div>
                                        </div>
                                    </div>   
                                    <br/>
                                    <br>&nbsp;</br>             
                                    <div class="col-lg-12">
                                        <div class="col-lg-4">                             
                                        <label for="attachType" class="form control-label pad_rgt0 flt_rgt pad_top7">Attachment Type</label>
                                        </div>
                                        <div class="col-lg-7">
                                            <div id="attachTypeOptions">
                                                   <apex:selectList id="attachType" value="{!selectAttachType}" styleClass="form-control" multiselect="false" size="1"> 
                                                    <apex:selectOptions value="{!attachTypeOptions}"/>  
                                                </apex:selectList>
                                            </div>
                                            <div id="attachTypeOptionsNonStandard">
                                                <apex:selectList id="attachTypeNonStandard" value="{!selectAttachType}" styleClass="form-control" multiselect="false" size="1"> 
                                                    <apex:selectOptions value="{!attachTypeOptions}"/>  
                                                </apex:selectList>
                                            </div>    
                                            
                                        </div>
                                    </div> 
                                    
                                    
                                    <br/>
                                    <br>&nbsp;</br>
                                    <br>&nbsp;</br>
                                    <div class="col-lg-12 txt_center fnt18">
                                        <input type="file" id="attachmentFile" onchange="onChangeFile();"/>
                                        
                                        
                                        <label for="attachmentFile" class="attachLabel">
                                            <span class="fa fa-upload"/>
                                            <span id="attachLabel" class="rw-dark-red pad_lft5"> 
                                                <apex:outputText >Choose File to Attach</apex:outputText> 
                                            </span>
                                        </label>
                                    </div>
                                   <div id="attachErrorMsg" class="rw-red txt_center">&nbsp;</div>    
                                </apex:actionRegion>                          
                            </p>
                        </div>
                        <div class="modal-footer footer-border">
                            <ul class="list-inline col-sm-12 mrg_all0 padd_all0 ">
                                <li class="col-sm-12 popup_close">
                                    <button id="attachBtnOneName" type="button" class="btn btn-danger" >Attach</button>
                                    <button id="attachBtnTwoName" type="button" class="btn btn-danger btn-outline">Cancel</button>                                    
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                </apex:outputPanel>
                </apex:form>
            </div>
            </apex:outputPanel>
            
            <!-- RWBAA AR Summary -->
            <apex:outputPanel id="modalRwbaa">
	            <div class="modal fade bd-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
				  <div class="modal-dialog modal-lg">
				    <div class="modal-content">
				     <div class="modal-header ">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h3 class="modal-title" id="myModalLabel" >RWBAA AR Data</h3>
				      </div>
				      <div class="modal-body">
				        ...
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				      </div>
				    </div>
				  </div>
				</div>
            </apex:outputPanel>
        
        <!--<c:JavaScriptLibrariesComponent />-->
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/bootstrap.min.js')}"></script>
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/jquery-ui-1.12.1/jquery-ui.min.js')}"></script>
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/jquery.maskedinput.min.js')}"></script>
        <script src="{!URLFOR($Resource.RWSC_Assets, 'include/js/account_summary.js')}"></script>
        <script src="/soap/ajax/10.0/connection.js">
        </script>
        <script src="/soap/ajax/10.0/apex.js">
        </script>
        <script src="https://use.fontawesome.com/da00ee6e16.js"></script>
        <apex:outputPanel id="Afterinsert">
            <script>
            
            
            function updateCreditBillingInfo(){
                if (creditAppDocAttached == true && creditAppDocInList == false){
                    uploadAttachValidate();  
                } else {
                    SaveCreditInfo(false);
                }            
            }
            
            function validateCreditBillingInfo(){
                sendingCreditApp = false;
                if($("[id$=billingForm]").valid()){
                    updateCreditBillingInfo();
                }
            }
            
            
            function updateCreditInfoJS() {
               if($("[id$=billingForm]").valid()){
                    SaveCreditInfo(false);
               }
            }

            function showEditDivs() {
                var link = '{!$CurrentPage.parameters.link}';
                if (link == 'edit') {
                    $("#accountDetails").hide();
                    $("#accountEdit").show();
                    $("#contactDetails").hide();
                    $("#contactEdit").show();
                    $("#billingDetails").hide();
                    $("#billingEdit").show();

                }
            }


            function AccountStatusReflect() {
                var status = '{!AccountStatus}';


                if (status == 'Active') {
                    specialModal('fa fa-bell-o', 'ACCOUNT ACTIVATION', 'Account is now active!', null, '', '', 'OKAY', null, '');
                    //$("#accountThanks").show();

                } else {
                    specialModal('fa fa-bell-o', 'ACCOUNT ACTIVATION', 'Account cannot be activated. {!AccountStatusMessage}', null, '', '', 'OKAY', null, '');
                    //$("#accountNotActive").show();
                }

            }

            function AccountStatusDeactivated() {
                //var status = '{!AccountStatus}';
                //$("#accountDeactivatedInfo").show();
                specialModal('fa fa-bell-o', 'ACCOUNT DEACTIVATION', 'Account has been deactivated.', null, '', '', 'OKAY', null, '');


                /*
                if (status == 'Active') {
                    //$( "#accountThanks" ).show();

                } else {
                    $("#accountDeactivatedInfo").show();
                }
                */

            }

            function ContactHideEdit() {
                //alert("{!contactId}  ... " +("{!contactId}" != '') );
                //if ("{!contactId}" != '') { // UA - Removed IF
                    document.getElementById("contactDetails").style.display = 'block';
                    document.getElementById("contactEdit").style.display = 'none';
                    document.getElementById("contactDetailsHeaderView").style.display = 'block';
                    document.getElementById("contactDetailsHeaderEdit").style.display = 'none';
                    document.getElementById("DifferentAddress").style.display = 'none';
                //editFlag = false;
            }

            function contactAddressOption() {

                var addreesOption = "{!SelectContactAddressOptions}";
                //alert(addreesOption);
                console.log(addreesOption);
                //var addreesOption = document.getElementById("duplicateMessage").innerHTML = "{!SelectContactAddressOptions}";
                if (addreesOption == 'Different') {
                    document.getElementById("SameAsAccountAddress").style.display = 'none';
                    document.getElementById("DifferentAddress").style.display = 'block';
                } else {
                    document.getElementById("SameAsAccountAddress").style.display = 'block';
                    document.getElementById("DifferentAddress").style.display = 'none';
                }

            }

            function checkExemption() {
                var taxExempt = "{!SelectTaxExempt}";
                //alert(taxExempt);
                if (taxExempt == 'Yes') {
                    document.getElementById("CertificationSection2").style.display = 'block';
                    document.getElementById("CertificationSection1").style.display = 'block';
                } else {
                    document.getElementById("CertificationSection2").style.display = 'none';
                    document.getElementById("CertificationSection1").style.display = 'none';
                }
            }

        
            function ShowSentCreditInfoPopUp() {
                var showPopUp = '{!SendCreditApplicationPopUp}';
                
                //alert('{!sendCreditErrorMsg}');
                if (showPopUp != '') {
                    specialModal('fa fa-bell-o', 'APPLICATION SENT', 'Thank you, your application has been submitted and can expect a response within 4 hours', '', 'OKAY');
                } else if ('{!sendCreditErrorMsg}' != '') {
                    specialModal('fa fa-bell-o', 'APPLICATION NOT SENT', '{!sendCreditErrorMsg}', '', 'OKAY');

                }
            }
              
            
            
            </script>
        </apex:outputPanel>
        <script>

        
        
        $(document).ready(function() {            
        
            $(".billingcredit_email").blur(function() {


                var contents = $(".billingcredit_email").val();
                $(".getbilling_email").val(contents);
            });
        });

        function ContactHideView() {
            document.getElementById("contactDetails").style.display = 'None';
            document.getElementById("contactEdit").style.display = 'block';
            document.getElementById("contactDetailsHeaderView").style.display = 'None';
            document.getElementById("contactDetailsHeaderEdit").style.display = 'block';
        }

        

        function HideOrShowTaxExempt(t) {
            if (t.value == 'Yes') {
                document.getElementById("CertificationSection2").style.display = 'block';
                document.getElementById("CertificationSection1").style.display = 'block';
                document.getElementById("AccountSummary:accountForm:certificate").focus(); 

            } else {
                document.getElementById("CertificationSection2").style.display = 'none';
                document.getElementById("CertificationSection1").style.display = 'none';
            }

        }

        function ContactAddress(t) {
            //alert(t.value);
            if (t.value == 'Different') {
                document.getElementById("SameAsAccountAddress").style.display = 'none';
                document.getElementById("SameAsBillingAddress").classList.add('dis_none');
                document.getElementById("DifferentAddress").style.display = 'block';
                document.getElementById("AccountSummary:contactForm:contactStreet").focus();
            } else if(t.value == 'Same as Billing') {
                document.getElementById("SameAsAccountAddress").style.display = 'none';
                document.getElementById("SameAsBillingAddress").classList.remove('dis_none');
                document.getElementById("DifferentAddress").style.display = 'none';            
            } else {
                document.getElementById("SameAsAccountAddress").style.display = 'block';
                document.getElementById("DifferentAddress").style.display = 'none';
                document.getElementById("SameAsBillingAddress").classList.add('dis_none');
            }
        }

        function clearUploadSelection(){
            $('#attachLabel').text("Choose File to Attach");

            $('#AttachmentListView').DataTable( {
                PageLength: 10,
                 bFilter: false,
                 order: [ 6, "desc" ]
            } );    
        }

       
        function HideCreditApplicationInfo() {
            $("#sendApplication").hide();
        }

        function clearInput() {
            $('.clearInput').val("");
        }
        
        
        </script>
        
        
        <!-- *************** File upload method Start ****************** -->
        
       
        
        
        
        <apex:outputpanel id="FileUploadSection1">
            <script type="text/javascript">
            
            function createRWFBandUpload() {
                var creditApplicationDoc = document.getElementById('AccountSummary:attachment:creditApplicationDoc').checked;
                console.log('creditApplicationDoc: ' + creditApplicationDoc);

                var attachType = 'attachType';

                if(creditApplicationDoc === true) attachType = 'attachTypeNonStandard';

                var accId = '{!accountId}';
                var attType = document.getElementById('AccountSummary:attachment:' + attachType).value;

                console.log('attType: ' + attType);

                var file = $('input[type=file]')[0].files[0];
                var filName = $('span#attachLabel').text();

                //console.log(file);
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.RWS_AccountSetupController.insertRWFB}',
                    accId, 
                    attType, 
                    creditApplicationDoc,
                    function(result, event){
                        if (event.status) {
                            uploadFile(result.Id, file, filName);                           
                        }
                        
                    }, 
                    {escape: true}
                ); 
            }



            var maxStringSize = 6000000; //Maximum String size is 6,000,000 characters
            var maxFileSize = 5242880; //4350000; //After Base64 Encoding, this is the max file size
            var chunkSize = 950000; //Maximum Javascript Remoting message size is 1,000,000 characters
            var attachment;
            var attachmentName;
            var attachmentType;
            var fileSize;
            var positionIndex;
            var doneUploading;
            var UploadErrorMsg;

            //Method to prepare a file to be attached to the Account bound to the page by the standardController
            function uploadFile(rwfbPara, file, filName) {
                
                var reloadpage = "{!ReloadIfNoAttachment}";
                var acctId = '{!accountId}';
                
                //console.log(file);
                console.log(reloadpage);
                console.log(acctId);
                console.log(filName);
                console.log(rwfbPara);
               
                //if ($('input[id="AccountSummary:accountForm:SelectTaxExemptid:0"]').is(':checked')) {


                    if (file != undefined && acctId != undefined && acctId.length > 0 && file.name == filName) {
                        if (file.size <= maxFileSize) {
                            attachmentName = file.name;
                            attachmentType = file.type;
                            var fileReader = new FileReader();
                            fileReader.onloadend = function(e) {

                                //need to read ArrayBuffer into usable string
                                var chars = new Uint8Array(e.target.result);
                                var CHUNK_SIZE = 0x8000;
                                var index = 0;
                                var length = chars.length;
                                var result = '';
                                var slice;
                                while (index < length) {
                                    slice = chars.subarray(index, Math.min(index + CHUNK_SIZE, length));
                                    result += String.fromCharCode.apply(null, slice);
                                    index += CHUNK_SIZE;
                                }
                                //here we are using Ajax API Toolkit
                                var att = new sforce.SObject("Attachment");
                                att.Name = attachmentName;
                                att.ContentType = attachmentType;
                                att.ParentId = rwfbPara;

                                att.Body = (new sforce.Base64Binary(result)).toString();

                                sforce.connection.create([att], {
                                    onSuccess: function(result, source) {
                                        if (result[0].getBoolean("success")) {
                                            console.log("new attachment created with id " + result[0].id);                                            
                                            refreshList();
                                            console.log("sendCredit: "+sendCredit);
                                            if (sendCredit == true) {
                                                sendCreditApp();
                                            } else {
                                                updateCreditInfoJS();
                                            }                                     
                                        } else {
                                            UploadErrorMsg = "Failed to create attachment " + result[0];
                                            console.log(UploadErrorMsg);
                                            //specialModal('fa fa-exclamation', 'UPLOAD ERROR', UploadErrorMsg, null, '', '', 'OKAY', null, '');
                                        }
                                    },
                                    onFailure: function(error, source) {
                                        UploadErrorMsg = "An error has occurred " + error;
                                        console.log(UploadErrorMsg);
                                        specialModal('fa fa-exclamation', 'UPLOAD ERROR', UploadErrorMsg, null, '', '', 'OKAY', null, '');
                                    },
                                    timeout: 120000
                                });


                            }
                            fileReader.onerror = function(e) {
                                //alert("There was an error reading the file.  Please try again.");
                                UploadErrorMsg = "There was an error reading the file.  Please try again.";
                                console.log(UploadErrorMsg);
                                specialModal('fa fa-exclamation', 'UPLOAD ERROR', UploadErrorMsg, null, '', '', 'OKAY', null, '');
                            }
                            fileReader.onabort = function(e) {
                                //alert("There was an error reading the file.  Please try again.");
                                UploadErrorMsg = "There was an error reading the file.  Please try again.";
                                console.log(UploadErrorMsg);
                                specialModal('fa fa-exclamation', 'UPLOAD ERROR', UploadErrorMsg, null, '', '', 'OKAY', null, '');
                            }

                            fileReader.readAsArrayBuffer(file); //Read the body of the file

                        } else {
                            //alert("File must be under 4.3 MB in size.  Your file is too large.  Please try again.");
                            UploadErrorMsg = "File must be under 5 MB in size.  Your file is too large.  Please try again.";
                            console.log(UploadErrorMsg);
                            //specialModal('fa fa-exclamation', 'UPLOAD ERROR', UploadErrorMsg, null, '', '', 'OKAY', null, '');
                        }
                    } else {
                        //alert("You must choose a file before trying to upload it");
                        // (MU: 12/19) File not required for initial setup. Task: RWCP-1170
                        //UploadErrorMsg = "You must choose a file before trying to upload it";
                        
                        
                    }

                
            }

           
          

            function restoreEdit() {
                $("#contactEditLink").attr("disabled", "false");
                $("#contactEditBtn").removeClass("disabled");
                $("#contactEditLink").click(function() {
                    editContact();
                    return false;
                });
                contactFocus();
            }
            </script>
        </apex:outputpanel>
        <!-- *************** File upload method End ****************** -->
        <script>
        var editFlag;
        
        
        
        $(document).ready(function() {
            //alert('Document Ready!');
            $(".mask-phone").focus(function() {
                $(this).mask("(999) 999-9999");
            });
            $(".mask-phone").mask("(999) 999-9999");

            $('input.datepicker').datepicker();
            if ('{!TaxExpiryDate}' !== "") {
                $('input.datepicker').datepicker("setDate", "{!displayTaxExpiryDate}");
            }
            
           editFlag = false;
           
           $('#attachmentFile').on('change', function() {
                var file = $('input[type=file]')[0].files[0].name;
                if (file != ' ' || file != null) {
                    $('span#attachLabel').text(file);
                    $('#clear-file').show();
                    $('span#attachLabel2').text(file);                   
                    document.getElementById("attachErrorMsg").innerHTML = "&nbsp;";

                }
            });
             
            
            // Added by UsmanAli validation and default selection of values in list based on saved record
            var inoviceAttributes = '{!selectInvoiceAttributes}';
            console.log('attributes selected: ' + inoviceAttributes);
            $.each(inoviceAttributes.split(";"), function(i, e) {
                $(".invoiceAttributeId option[value='" + e + "']").prop("selected", true);
            });

            var last_valid_selection = null;
            $('.invoiceAttributeId').change(function(event) {
                if ($(this).val().length > 4) {
                    $(this).val(last_valid_selection);
                } else {
                    last_valid_selection = $(this).val();
                }
            });
          


        });

       function NumbersOnly(e) {
           
            var AllowableCharacters='1234567890';
            var i = document.all?parseInt(e.keyCode): parseInt(e.which);
            if (i!=13 && i!=8 && i!=0){
                if ((e.ctrlKey==false) && (e.altKey==false)) {
                    return (AllowableCharacters.indexOf(String.fromCharCode(i))!=-1);
                } else {
                    return true;
                }
            } else {
                return true;
            }
        } 
        
        
        function resetSessVar() {
            if (sessionStorage.getItem('discountFootwearTable') != null) {
                sessionStorage.removeItem('discountFootwearTable');
            } else if (sessionStorage.getItem('discountAccessoriesTable') != null) {
                sessionStorage.removeItem('discountAccessoriesTable');
            } else if (sessionStorage.getItem('discountWorkwearTable') != null) {
                sessionStorage.removeItem('discountWorkwearTable');
            } else if (sessionStorage.getItem('discountOutsideTable') != null) {
                sessionStorage.removeItem('discountOutsideTable');
            } 
            console.log('sessionStorage cleared for discount');
        }
        
        function onChangeFile() {                
                var file = $('input[type=file]')[0].files[0].name;                                
                if (file != ' ' || file != null) {
                    document.getElementById("attachLabel").innerHTML = file ;
                    document.getElementById("attachErrorMsg").innerHTML = '&nbsp;';
                   
                }
        }
        
        function accountFocus(){
            document.getElementById("AccountSummary:accountForm:phone").focus();        

        }
        
        function contactFocus(){
            document.getElementById("AccountSummary:contactForm:firstName").focus(); 
        }
        
        
        //This function will pop up a standard confirm box when exiting the page with unsaved changes - cannot be custom styled
        
        window.onbeforeunload = function (e){
            if(editFlag == true)  
                return 'Are you sure you want to leave the page without Saving?';
        }; 
        
      /*NEW For RWBAA Summary*/
      	

		// Fill modal with content from link href
		$("#myModal").on("show.bs.modal", function(e) {
		    var link = $(e.relatedTarget);
		    $(this).find(".modal-body").load(link.attr("href"));
		});   
		
		//Clear modal body on close
		$(".modal").on("hidden.bs.modal", function(){
		    $(".modal-body").html("");
		});   
		

        
        </script>
        <script type="text/javascript">
        var __sfdcSessionId = '{!GETSESSIONID()}';
        </script>
        <script src="../../soap/ajax/19.0/connection.js" type="text/javascript"></script>
    </body>

    </html>
    
</apex:page>